(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed794a3e"],{1921:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"i",(function(){return n})),a.d(e,"h",(function(){return r})),a.d(e,"j",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"e",(function(){return f}));var o=a("1c1e"),i=function(t){return Object(o["a"])({url:"/admin/home/get-set",params:t,method:"get"})},n=function(t){return Object(o["a"])({url:"/admin/home/set-open",data:t,method:"post"})},r=function(t){return Object(o["a"])({url:"/admin/home/set-banner",data:t,method:"post"})},s=function(t){return Object(o["a"])({url:"/admin/home/set-title",data:t,method:"post"})},l=function(t){return Object(o["a"])({url:"/admin/home/list",params:t,method:"get"})},c=function(t){return Object(o["a"])({url:"/admin/home/get-type",params:t,method:"get"})},u=function(t){return Object(o["a"])({url:"/admin/home/search-doc",data:t,method:"post"})},d=function(t){return Object(o["a"])({url:"/admin/home/add",data:t,method:"post"})},m=function(t){return Object(o["a"])({url:"/admin/home/edit",data:t,method:"post"})},f=function(t){return Object(o["a"])({url:"/admin/home/delete",data:t,method:"post"})}},"1a57":function(t,e,a){"use strict";a("6bd7")},"2f21":function(t,e,a){"use strict";var o=a("79e5");t.exports=function(t,e){return!!t&&o((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,a){"use strict";var o=a("5ca1"),i=a("d8e8"),n=a("4bf8"),r=a("79e5"),s=[].sort,l=[1,2,3];o(o.P+o.F*(r((function(){l.sort(void 0)}))||!r((function(){l.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(n(this)):s.call(n(this),i(t))}})},"6bd7":function(t,e,a){},"7f6c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("div",{staticClass:"title"},[t._v("首页文档设置")]),a("div",{staticClass:"tab-wrap"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),a("el-tab-pane",{attrs:{label:"公告",name:"1"}}),a("el-tab-pane",{attrs:{label:"首页类型一",name:"2"}}),a("el-tab-pane",{attrs:{label:"首页类型二",name:"3"}})],1),a("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDialogForm(0)}}},[t._v("添加首页文档")])],1),a("div",{staticClass:"reset-element"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.docSettingData}},[a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"80"}}),a("el-table-column",{attrs:{align:"center",prop:"document_name",label:"首页名称"}}),2==t.activeName||0==t.activeName?a("el-table-column",{attrs:{align:"center",label:"导航图标"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.logo?a("img",{staticClass:"nav-icon",attrs:{src:o.logo}}):a("span",[t._v("--")])]}}],null,!1,537090118)}):t._e(),a("el-table-column",{attrs:{align:"center",label:"文档地址"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.first_chapter_id?a("a",{attrs:{target:"_blank",href:t.origin+"/chapter/"+o.document_id+"?id="+o.first_chapter_id}},[t._v(t._s(t.origin+"/chapter/"+o.document_id+"?id="+o.first_chapter_id))]):a("span",[t._v("--")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"type_name",label:"首页显示类型"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",{staticClass:"edit",on:{click:function(e){return t.showDialogForm(1,o)}}},[t._v("编辑")]),a("span",{staticClass:"remove",on:{click:function(e){return t.remove(o)}}},[t._v("删除")])]}}])})],1),t.total>10?a("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.total}}):t._e()],1),a("el-dialog",{attrs:{title:"收货地址",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"首页类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择类型",disabled:t.isEdit},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.hometypes,(function(t){return a("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})})),1)],1),1!==t.form.type?a("el-form-item",{attrs:{label:"文档排序","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{controls:!1,min:0,max:100,precision:0,placeholder:"输入整数，数值越小排名越靠前"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1):t._e(),2===t.form.type?a("el-form-item",{attrs:{label:"文档图标","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/common/upload/image",accept:"image/*","show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo,alt:""}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):t._e(),a("el-form-item",{attrs:{label:"添加文档","label-width":t.formLabelWidth}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入文档名称","trigger-on-focus":!1,clearable:""},on:{select:t.handleSelect},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),2===t.form.type?a("el-form-item",{attrs:{label:"文档简介","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"不超过25个字"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},i=[],n=(a("ac6a"),a("55dd"),a("7f7f"),a("1921")),r={name:"indexDocSetting",data:function(){return{origin:"",activeName:localStorage.homeDocSetActiveHome||0,docSettingData:[],queryList:{type:localStorage.homeDocSetActiveHome||0},total:0,dialogFormVisible:!1,formLabelWidth:"120px",hometypes:[],form:{type:1,document_id:void 0,logo:void 0,desc:void 0,sort:void 0,id:void 0},form2:{type:1,document_id:"",logo:"",desc:"",sort:"",id:""},imageUrl:"",searchForm:{keyword:void 0},restaurants:[],isEdit:!1}},created:function(){this.init()},methods:{init:function(){this.origin=location.origin,this.getHomeType(),this.getHomeList()},getHomeType:function(){var t=this;Object(n["c"])().then((function(e){200===e.code&&(t.hometypes=e.data)})).catch((function(t){}))},getHomeList:function(){var t=this;Object(n["b"])(this.queryList).then((function(e){200===e.code&&(t.docSettingData=e.data.data,t.total=e.data.total)})).catch((function(t){}))},handleClick:function(t){this.queryList.type=t.name,localStorage.homeDocSetActiveHome=t.name,this.getHomeList()},showDialogForm:function(t,e){if(this.dialogFormVisible=!0,this.form=JSON.parse(JSON.stringify(this.form2)),this.isEdit=t>0,this.searchForm.keyword="",this.isEdit)this.form.id=e.id,this.form.type=e.type,this.form.sort=e.sort,this.form.logo=e.logo,this.form.desc=e.description;else{var a=+this.activeName;this.form.type=a||1}},remove:function(t){var e=this;this.$confirm("此操作将删除该设置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["e"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功!"),e.getHomeList())})).catch((function(t){}))})).catch((function(){e.$message.info("已取消删除")}))},handleUploadSuccess:function(t){200===t.code&&(this.form.logo=t.data.url)},beforeAvatarUpload:function(t){var e=5,a=t.size/1024/1024<=e;return a||this.$message.error("上传图片大小不能超过".concat(e,"MB!")),a},querySearch:function(t,e){var a=this;Object(n["g"])(this.searchForm).then((function(t){a.restaurants=t.data,a.restaurants.forEach((function(t){t["value"]=t.name})),e(a.restaurants)})).finally((function(){a.listLoading=!1}))},handleSelect:function(t){this.form.document_id=t.document_id},submitForm:function(){this.isEdit?this.homeEdit():this.homeAdd()},homeEdit:function(){var t=this;Object(n["f"])(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("更新成功"),t.getHomeList())}))},homeAdd:function(){var t=this;Object(n["d"])(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("保存成功"),t.getHomeList())}))}}},s=r,l=(a("1a57"),a("2877")),c=Object(l["a"])(s,o,i,!1,null,"11ffdab6",null);e["default"]=c.exports},ac6a:function(t,e,a){for(var o=a("cadf"),i=a("0d58"),n=a("2aba"),r=a("7726"),s=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),m=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),p=0;p<h.length;p++){var b,g=h[p],v=f[g],y=r[g],L=y&&y.prototype;if(L&&(L[u]||s(L,u,m),L[d]||s(L,d,g),l[g]=m,v))for(b in o)L[b]||n(L,b,o[b],!0)}}}]);