(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd264252"],{"02f4":function(e,t,a){var i=a("4588"),n=a("be13");e.exports=function(e){return function(t,a){var o,r,s=String(n(t)),l=i(a),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?e?s.charAt(l):o:e?s.slice(l,l+2):r-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var i=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?i(e,t).length:1)}},"0454":function(e,t,a){"use strict";a("fa9a")},"0bfb":function(e,t,a){"use strict";var i=a("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,a){var i=a("52a7"),n=a("4630"),o=a("6821"),r=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=o(e),t=r(t,!0),l)try{return c(e,t)}catch(a){}if(s(e,t))return n(!i.f.call(e,t),e[t])}},"214f":function(e,t,a){"use strict";a("b0c5");var i=a("2aba"),n=a("32e9"),o=a("79e5"),r=a("be13"),s=a("2b4c"),l=a("520a"),c=s("species"),d=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var f=s(e),p=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=p?!o((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!t})):void 0;if(!p||!g||"replace"===e&&!d||"split"===e&&!u){var v=/./[f],h=a(r,f,""[e],(function(e,t,a,i,n){return t.exec===l?p&&!n?{done:!0,value:v.call(t,a,i)}:{done:!0,value:e.call(a,t,i)}:{done:!1}})),m=h[0],b=h[1];i(String.prototype,e,m),n(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var i=a("aae3"),n=a("cb7c"),o=a("ebd6"),r=a("0390"),s=a("9def"),l=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,f=[].push,p="split",g="length",v="lastIndex",h=4294967295,m=!d((function(){RegExp(h,"y")}));a("214f")("split",2,(function(e,t,a,d){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(n,e,t);var o,r,s,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,p=void 0===t?h:t>>>0,m=new RegExp(e.source,d+"g");while(o=c.call(m,n)){if(r=m[v],r>u&&(l.push(n.slice(u,o.index)),o[g]>1&&o.index<n[g]&&f.apply(l,o.slice(1)),s=o[0][g],u=r,l[g]>=p))break;m[v]===o.index&&m[v]++}return u===n[g]?!s&&m.test("")||l.push(""):l.push(n.slice(u)),l[g]>p?l.slice(0,p):l}:"0"[p](void 0,0)[g]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,i){var n=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,i):b.call(String(n),a,i)},function(e,t){var i=d(b,e,this,t,b!==a);if(i.done)return i.value;var c=n(e),f=String(this),p=o(c,RegExp),g=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),_=new p(m?c:"^(?:"+c.source+")",v),y=void 0===t?h:t>>>0;if(0===y)return[];if(0===f.length)return null===l(_,f)?[f]:[];var x=0,w=0,D=[];while(w<f.length){_.lastIndex=m?w:0;var C,k=l(_,m?f:f.slice(w));if(null===k||(C=u(s(_.lastIndex+(m?0:w)),f.length))===x)w=r(f,w,g);else{if(D.push(f.slice(x,w)),D.length===y)return D;for(var M=1;M<=k.length-1;M++)if(D.push(k[M]),D.length===y)return D;w=x=C}}return D.push(f.slice(x)),D}]}))},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3b2b":function(e,t,a){var i=a("7726"),n=a("5dbc"),o=a("86cc").f,r=a("9093").f,s=a("aae3"),l=a("0bfb"),c=i.RegExp,d=c,u=c.prototype,f=/a/g,p=/a/g,g=new c(f)!==f;if(a("9e1e")&&(!g||a("79e5")((function(){return p[a("2b4c")("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")})))){c=function(e,t){var a=this instanceof c,i=s(e),o=void 0===t;return!a&&i&&e.constructor===c&&o?e:n(g?new d(i&&!o?e.source:e,t):d((i=e instanceof c)?e.source:e,i&&o?l.call(e):t),a?this:u,c)};for(var v=function(e){e in c||o(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},h=r(d),m=0;h.length>m;)v(h[m++]);u.constructor=c,c.prototype=u,a("2aba")(i,"RegExp",c)}a("7a56")("RegExp")},"49f7":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-setting"},[e.showAddManage||e.feedDetailVisible?e._e():a("div",{staticClass:"document-setting-warpper"},[a("div",{staticClass:"nav"},[a("div",{staticClass:"nav-item",class:{active:0==e.active},on:{click:function(t){return e.onClickNav(0)}}},[0==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          项目概览\n        ")]),a("div",{staticClass:"nav-item",class:{active:1==e.active},on:{click:function(t){return e.onClickNav(1)}}},[1==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          权限管理\n        ")]),a("div",{staticClass:"nav-item",class:{active:2==e.active},on:{click:function(t){return e.onClickNav(2)}}},[2==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          历史记录\n        ")]),a("div",{staticClass:"nav-item",class:{active:3==e.active},on:{click:function(t){return e.onClickNav(3)}}},[3==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          反馈建议\n          "),e.newFeed?a("span",{staticClass:"redDot"}):e._e()])]),a("div",{staticClass:"content"},[0==e.active?a("div",{staticClass:"project"},[a("el-form",{key:"doc",ref:"docForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.docData,rules:e.rules,"label-width":"85px","label-position":"left"}},[a("el-form-item",{staticClass:"cover-warpper",attrs:{label:"项目封面"}},[a("div",{staticClass:"upload-wrap"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"cover-img"},[e.docData.cover?a("img",{attrs:{src:e.docData.cover}}):e._e()])]),a("div",{staticClass:"cover-btn"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary",plain:""}},[e._v("上传封面")])],1),a("el-button",{staticClass:"cover-default",on:{click:function(t){e.docData.cover=""}}},[e._v("默认封面")])],1)],1),a("div",{staticClass:"el-upload__tip"},[e._v("格式要求：支持jpg、jpeg、png格式，图片小于5M，最佳图片比例2:1。")])]),a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.docData.name,callback:function(t){e.$set(e.docData,"name",t)},expression:"docData.name"}})],1),a("el-form-item",{attrs:{label:"公开性质"}},[a("el-select",{model:{value:e.docData.is_public,callback:function(t){e.$set(e.docData,"is_public",t)},expression:"docData.is_public"}},[a("el-option",{attrs:{label:"公开项目",value:"1"}}),a("el-option",{attrs:{label:"私有项目",value:"2"}})],1)],1),1!=e.docData.is_public?a("el-form-item",{attrs:{label:"查看权限"}},[a("el-select",{model:{value:e.docData.login_preview,callback:function(t){e.$set(e.docData,"login_preview",t)},expression:"docData.login_preview"}},[a("el-option",{attrs:{label:"仅限有权限者查看",value:"2"}}),a("el-option",{attrs:{label:"点击链接登录后查看",value:"3"}})],1)],1):e._e()],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveDoc}},[e._v("保存")]),a("el-button",{on:{click:e.delDoc}},[e._v("删除")])],1)],1):e._e(),1==e.active?a("div",{staticClass:"manage"},[a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openAddManage}},[e._v("添加权限")])],1),a("el-table",{key:"manageTable",staticClass:"w7-table",attrs:{"max-height":"370",data:e.details.operator,"header-cell-style":{background:"#f7f9fc",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"username",label:"名称",width:"300px"}}),a("el-table-column",{attrs:{label:"身份",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.shwoEditRole&&e.selectUserId==t.row.id?a("el-select",{staticClass:"edit-role-change",on:{change:e.editRole},model:{value:e.selectUserRole,callback:function(t){e.selectUserRole=t},expression:"selectUserRole"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):[1==t.row.acl.role?a("div",{staticClass:"identity"},[e._v(e._s(t.row.acl.name))]):[e._v(e._s(t.row.acl.name))]]]}}],null,!1,505741635)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"oper"},[2==e.details.is_public?a("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"bottom"}},[e.details.acl.has_manage&&1!=t.row.acl.role?a("i",{staticClass:"wi wi-edit",on:{click:function(a){return a.stopPropagation(),e.editManage(t.row)}}}):e._e()]):e._e(),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[e.details.acl.has_manage&&1!=t.row.acl.role?a("i",{staticClass:"wi wi-delete",on:{click:function(a){return e.removeManage(t.row.id)}}}):e._e()])],1)}}],null,!1,519701077)})],1)],1):e._e(),2==e.active?a("div",{staticClass:"history"},[a("el-table",{key:"historyTable",ref:"historyTableRef",staticClass:"w7-table",attrs:{data:e.historyList,"max-height":"370"}},[a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{prop:"time",label:"时间",align:"right"}})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total","prev-text":"上一页","next-text":"下一页","page-size":5,"current-page":e.currentPageHistory,"page-count":e.pageCountHistory,"hide-on-single-page":!0},on:{"current-change":e.getHistory,"update:currentPage":function(t){e.currentPageHistory=t},"update:current-page":function(t){e.currentPageHistory=t}}})],1):e._e(),3==e.active?a("div",{staticClass:"feed"},[a("el-table",{key:"feedTable",ref:"feedTableRef",staticClass:"w7-table",attrs:{data:e.feedList,"max-height":"370"}},[a("el-table-column",{attrs:{prop:"type_name",label:"问题类型",align:"center"}}),a("el-table-column",{attrs:{prop:"created_at",label:"时间",align:"center"}}),a("el-table-column",{attrs:{prop:"status_text",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.status?a("span",[e._v(e._s(i.status_text))]):a("span",{staticStyle:{color:"#3296fa"}},[e._v(e._s(i.status_text))])]}}],null,!1,2194571870)}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.getFeedDetail(t.row)}}},[e._v("查看详情")])],1)]}}],null,!1,1946360409)})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total","prev-text":"上一页","next-text":"下一页","page-size":5,"current-page":e.currentPageFeed,"page-count":e.pageCountFeed,"hide-on-single-page":!0},on:{"current-change":e.getFeed,"update:currentPage":function(t){e.currentPageFeed=t},"update:current-page":function(t){e.currentPageFeed=t}}})],1):e._e()])]),e.feedDetailVisible?a("div",{staticClass:"feedDetailHeader"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){e.feedDetailVisible=!1}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("用户反馈详情")]),a("el-link",{attrs:{underline:!1},on:{click:function(t){e.feedDetailVisible=!1}}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),e.feedDetailVisible?a("div",{staticClass:"feedDetail"},[a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("问题类型:")]),a("div",{staticClass:"rig",domProps:{innerHTML:e._s(e.feedType)}})]),a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("意见反馈:")]),a("div",{staticClass:"rig"},[e._v(e._s(e.feedDetail.content))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("反馈截图:")]),a("div",{staticClass:"rig"},e._l(e.feedDetail.images,(function(t,i){return a("el-image",{key:i,staticStyle:{width:"100px",height:"100px","margin-right":"20px"},attrs:{src:t,"preview-src-list":e.feedDetail.images}})})),1)])]):e._e(),e.showAddManage?a("div",{staticClass:"add-manage-header"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("添加权限")]),a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),e.showAddManage?a("div",{staticClass:"add-manage-body"},[a("el-form",{key:"addManage",ref:"addManageForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.addManageData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.addManageData.username,callback:function(t){e.$set(e.addManageData,"username",t)},expression:"addManageData.username"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.username,attrs:{label:e.username,value:e.username}})})),1)],1),a("el-form-item",{attrs:{label:"权限设置"}},[a("el-select",{model:{value:e.addManageData.role,callback:function(t){e.$set(e.addManageData,"role",t)},expression:"addManageData.role"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"add-manage-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addManage}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.showAddManage=!1}}},[e._v("取 消")])],1)],1):e._e(),a("div",{staticClass:"reset-element"},[a("el-dialog",{staticClass:"delete-doc",attrs:{title:"删除文档",visible:e.deleteDocVisible,width:"570px",center:"",modal:!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.deleteDocVisible=t}}},[a("el-form",{staticStyle:{padding:"0 30px 20px"},attrs:{model:e.deleteDocForm}},[a("el-form-item",{attrs:{label:"文档名称：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.deleteDocForm.name,callback:function(t){e.$set(e.deleteDocForm,"name",t)},expression:"deleteDocForm.name"}}),a("div",{staticClass:"el-form-item__error",staticStyle:{"margin-top":"5px"}},[e._v("删除文档须谨慎操作，一旦删除将无法恢复！")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDocVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.defineDeleteDoc}},[e._v("确 定")])],1)],1)],1)])},n=[],o=a("79ac"),r=o["a"],s=(a("7d57"),a("0454"),a("2877")),l=Object(s["a"])(r,i,n,!1,null,"63bdab51",null);t["a"]=l.exports},"520a":function(e,t,a){"use strict";var i=a("0bfb"),n=RegExp.prototype.exec,o=String.prototype.replace,r=n,s="lastIndex",l=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],d=l||c;d&&(r=function(e){var t,a,r,d,u=this;return c&&(a=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),l&&(t=u[s]),r=n.call(u,e),l&&r&&(u[s]=u.global?r.index+r[0].length:t),c&&r&&r.length>1&&o.call(r[0],a,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(r[d]=void 0)})),r}),e.exports=r},"5dbc":function(e,t,a){var i=a("d3f4"),n=a("8b97").set;e.exports=function(e,t,a){var o,r=t.constructor;return r!==a&&"function"==typeof r&&(o=r.prototype)!==a.prototype&&i(o)&&n&&n(e,o),e}},"5f1b":function(e,t,a){"use strict";var i=a("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var o=a.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},6297:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r}));var i=a("1c1e"),n=function(e){return Object(i["a"])({url:"/admin/document/feedback-list",data:e,method:"post"})},o=function(e){return Object(i["a"])({url:"/admin/document/feedback-detail",data:e,method:"post"})},r=function(e){return Object(i["a"])({url:"/document/feedback/add",data:e,method:"post"})}},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),o=a("9e1e"),r="toString",s=/./[r],l=function(e){a("2aba")(RegExp.prototype,r,e,!0)};a("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?n.call(e):void 0)})):s.name!=r&&l((function(){return s.call(this)}))},"79ac":function(e,t,a){"use strict";(function(e){a("28a5"),a("6b54"),a("7f7f");var i=a("4ec3"),n=a("6297");t["a"]={name:"setting",props:["id"],data:function(){return{active:0,details:"",docData:{cover:"",name:"",is_public:"1",login_preview:"2",is_public_Copy:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"change"}]},addManageData:{},role_list:[],showAddManage:!1,shwoEditRole:!1,selectUserId:"",selectUserRole:"",historyList:[],currentPageHistory:1,pageCountHistory:0,feedList:[],feedDetail:{},feedType:"",totalHistory:0,currentPageFeed:1,newFeed:!1,pageCountFeed:0,feedDetailVisible:!1,userOptions:[],loading:!1,deleteDocVisible:!1,formLabelWidth:"120px",deleteDocForm:{name:"",document_id:""}}},watch:{id:function(e,t){this.active=0,this.getdetails()}},created:function(){this.getdetails(),this.getFeedFlag()},mounted:function(){var t=this;e(document).on("click",(function(){t.shwoEditRole=!1}))},methods:{onClickNav:function(e){2==e?this.getHistory():3==e&&this.getFeed(),this.active=e},getdetails:function(){var e=this;this.$post("/admin/document/detail",{document_id:this.id}).then((function(t){e.details=t.data;var a="",i="";1==t.data.is_public?(i=2,a=1):(t.data.is_public,i=t.data.is_public,a=2),e.docData={cover:t.data.cover||"",name:t.data.name,is_public:a,login_preview:i,is_public_Copy:t.data.is_public},e.docData.is_public=e.docData.is_public.toString(),e.docData.login_preview=e.docData.login_preview.toString(),e.role_list=t.data.role_list,e.addManageData.role=t.data.role_list[0].id,e.deleteDocForm.document_id=e.details.id}))},getHistory:function(){var e=this;this.$post("/admin/operate-log/get-by-document ",{document_id:this.id,page:this.currentPageHistory}).then((function(t){e.historyList=t.data.data||[],e.pageCountHistory=t.data.page_count,e.totalHistory=t.data.total,e.$refs.historyTableRef.bodyWrapper.scrollTop=0}))},getFeed:function(){var e=this;Object(n["b"])({document_id:this.id,page:this.currentPageFeed,page_size:this.pageCountFeed}).then((function(t){e.feedList=t.data.data||[],e.pageCountFeed=t.data.pegt_count,e.$refs.feedTableRef.bodyWrapper.scrollTop=0}))},getFeedDetail:function(e){var t=this;Object(n["a"])({feed_id:e.id,document_id:e.document_id}).then((function(e){t.feedDetail=e.data;var a=t.feedDetail.type_name.split(",");t.feedType="";for(var i=0;i<a.length;i++)t.feedType+="".concat(i+1," : ").concat(a[i],"<br/>");t.feedDetailVisible=!0,t.getFeedFlag()}))},getFeedFlag:function(){var e=this;Object(i["k"])({document_id:this.id}).then((function(t){200==t.code&&(e.newFeed=t.data.new_feed)}))},handleAvatarSuccess:function(e){200===e.code?this.docData.cover=e.data.url:this.$message.error(e.message)},beforeAvatarUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传图片只支持jpg、jpeg、png格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),t&&a},saveDoc:function(){var e=this,t=this.docData.cover,a=this.docData.name,i=this.docData.login_preview,n=this.docData.is_public;n=1==n?1:2==i?2:3,this.$refs["docForm"].validate((function(i){i&&e.$post("/admin/document/update",{document_id:e.details.id,cover:t,name:a,is_public:n}).then((function(){e.getdetails(),e.$message({type:"success",message:"保存成功!"})}))}))},delDoc:function(){this.deleteDocVisible=!0},editManage:function(e){this.selectUserId=e.id,this.selectUserRole=e.acl.role,this.shwoEditRole=!0},editRole:function(){var e=this;this.$post("/admin/document/operator",{user_id:this.selectUserId,document_id:this.id,permission:this.selectUserRole}).then((function(){e.getdetails(),e.shwoEditRole=!1}))},removeManage:function(e){var t=this;this.$confirm("确定删除该操作员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$post("/admin/document/operator",{user_id:e,document_id:t.id}).then((function(){t.getdetails(),t.$message("删除成功！")}))}))},openAddManage:function(){this.addManageData={username:"",role:this.role_list[0].id||""},this.showAddManage=!0},addManage:function(){var e=this,t=!0;for(var a in this.details.operator)if(this.details.operator[a].username==this.addManageData.username)return this.$message("用户已存在"),void(t=!1);t&&this.$refs["addManageForm"].validate((function(t){t&&e.$post("/admin/document/operator",{user_name:e.addManageData.username,document_id:e.id,permission:e.addManageData.role}).then((function(){e.getdetails(),e.$message("添加成功！"),e.showAddManage=!1}))}))},uploadCover:function(){this.$refs.upload.uploadFiles()},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,Object(i["o"])({no_self:1,name:e}).then((function(e){t.loading=!1,t.userOptions=e.data})).catch((function(e){t.loading=!1}))):this.userOptions=[]},defineDeleteDoc:function(){var e=this;Object(i["e"])(this.deleteDocForm).then((function(){e.$parent.handleClose(),e.deleteDocVisible=!1,e.deleteDocForm.name="",e.$message({type:"success",message:"删除成功!"});var t=e.$route.name;e.$router.push({name:t})}))}}}}).call(this,a("1157"))},"7d57":function(e,t,a){"use strict";a("e30f")},"8b97":function(e,t,a){var i=a("d3f4"),n=a("cb7c"),o=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,a){return o(e,a),t?e.__proto__=a:i(e,a),e}}({},!1):void 0),check:o}},9093:function(e,t,a){var i=a("ce10"),n=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},a481:function(e,t,a){"use strict";var i=a("cb7c"),n=a("4bf8"),o=a("9def"),r=a("4588"),s=a("0390"),l=a("5f1b"),c=Math.max,d=Math.min,u=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,v){return[function(i,n){var o=e(this),r=void 0==i?void 0:i[t];return void 0!==r?r.call(i,o,n):a.call(String(o),i,n)},function(e,t){var n=v(a,e,this,t);if(n.done)return n.value;var u=i(e),f=String(this),p="function"===typeof t;p||(t=String(t));var m=u.global;if(m){var b=u.unicode;u.lastIndex=0}var _=[];while(1){var y=l(u,f);if(null===y)break;if(_.push(y),!m)break;var x=String(y[0]);""===x&&(u.lastIndex=s(f,o(u.lastIndex),b))}for(var w="",D=0,C=0;C<_.length;C++){y=_[C];for(var k=String(y[0]),M=c(d(r(y.index),f.length),0),$=[],F=1;F<y.length;F++)$.push(g(y[F]));var R=y.groups;if(p){var E=[k].concat($,M,f);void 0!==R&&E.push(R);var S=String(t.apply(void 0,E))}else S=h(k,f,M,$,R,t);M>=D&&(w+=f.slice(D,M)+S,D=M+k.length)}return w+f.slice(D)}];function h(e,t,i,o,r,s){var l=i+e.length,c=o.length,d=p;return void 0!==r&&(r=n(r),d=f),a.call(s,d,(function(a,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":s=r[n.slice(1,-1)];break;default:var d=+n;if(0===d)return a;if(d>c){var f=u(d/10);return 0===f?a:f<=c?void 0===o[f-1]?n.charAt(1):o[f-1]+n.charAt(1):a}s=o[d-1]}return void 0===s?"":s}))}}))},aae3:function(e,t,a){var i=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},b0c5:function(e,t,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},e30f:function(e,t,a){},fa9a:function(e,t,a){}}]);