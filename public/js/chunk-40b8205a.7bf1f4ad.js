(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40b8205a"],{"35b0":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"admin-login"},[e("div",{staticClass:"login-box"},[e("h2",[t._v("文档管理系统")]),e("el-tabs",{model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},[e("el-tab-pane",{attrs:{label:"账号登录",name:"first"}},[e("div",{staticClass:"login-form"},[e("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"用户名/手机号"},model:{value:t.formData.username,callback:function(n){t.$set(t.formData,"username",n)},expression:"formData.username"}}),e("el-input",{attrs:{type:"password","prefix-icon":"el-icon-s-goods",placeholder:"输入密码"},model:{value:t.formData.userpass,callback:function(n){t.$set(t.formData,"userpass",n)},expression:"formData.userpass"}}),e("el-input",{staticClass:"code-input",attrs:{"prefix-icon":"el-icon-s-goods",placeholder:"输入图形验证码"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.login(n)}},model:{value:t.formData.code,callback:function(n){t.$set(t.formData,"code",n)},expression:"formData.code"}},[e("img",{attrs:{slot:"append",src:t.code,alt:""},on:{click:t.getCode},slot:"append"})])],1),t.thirdPartyList.length?e("div",{staticClass:"login-thirdParty"},[e("span",{staticClass:"title"},[t._v("第三方账号登录")]),e("div",{staticClass:"icon-list"},t._l(t.thirdPartyList,(function(n){return e("img",{key:n.name,staticClass:"icon-block",attrs:{src:n.logo,title:n.name},on:{click:function(e){return t.thirdPartyIconClick(n.redirect_url)}}})})),0)]):t._e(),e("el-button",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")])],1)],1)],1),t._m(0)])},o=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"footer"},[t._v("\n    Powered by "),e("a",{attrs:{href:"https://www.w7.cc"}},[t._v("微擎云计算©www.w7.cc")])])}],r=e("1c1e"),c=e("4ec3"),i={name:"adminLogin",data:function(){return{autofocus:!1,active:"first",code:"",formData:{username:"",userpass:"",code:""},thirdPartyList:[]}},beforeRouteEnter:function(t,n,e){var a=t.query.code,o=t.query.redirect_url,i=t.query.app_id;a?r["a"].post("/common/auth/third-party-login",{code:a,app_id:i}).then((function(t){t&&t.data.is_need_bind?e("/bind"):t&&t.data.has_login?e((function(n){1==t.data.has_login?n.$confirm("当前登录账号非微擎账户绑定账号，是否继续登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["b"])({change_token:t.data.change_token}).then((function(){n.$message({type:"success",message:"切换账户成功!"}),n.$router.push({name:"admin"})}))})).catch((function(){n.$message({type:"info",message:"已取消"}),n.$router.push({name:"admin"})})):2==t.data.has_login?n.$confirm("是否绑定当前微擎账户于该登录账户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["a"])({bind_token:t.data.bind_token}).then((function(){n.$message({type:"success",message:"绑定账户成功!"}),n.$router.push({name:"admin"})}))})).catch((function(){n.$message({type:"info",message:"已取消"}),n.$router.push({name:"admin"})})):3==t.data.has_login&&n.$confirm("当前登录账号非微擎账户绑定账号，是否继续登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["v"])({source_token:t.data.source_token}).then((function(){n.$router.push({name:"adminBind"})}))})).catch((function(){n.$message({type:"info",message:"已取消"}),n.$router.push({name:"admin"})}))})):t&&"success"==t.data?e("/admin/document"):o?window.open(o,"_self"):e("/admin/document")})).catch((function(){})):r["a"].post("/common/auth/default-login-url").then((function(t){t.data?window.open(t.data,"_self"):e()})).catch((function(t){}))},created:function(){this.getCode(),this.getThirdParty()},methods:{showFind:function(){this.$message({message:"请联系管理员修改或使用密码找回工具修改"})},getCode:function(){var t=this;this.$post("/common/verifycode/image").then((function(n){n.img&&(t.code=n.img)}))},login:function(){var t=this;for(var n in this.formData)if(!this.formData[n])return this.$message("请填写完整表单"),!1;this.$post("/common/auth/login",this.formData).then((function(){var n=t.$message("登录成功");setTimeout((function(){n.close(),t.$route.query&&t.$route.query.redirect_url?window.open(t.$route.query.redirect_url,"_self"):t.$router.push("/admin/document")}),500)})).catch((function(){t.formData.code="",document.getElementsByClassName("el-input__inner")[2].focus(),t.getCode()}))},getThirdParty:function(){var t=this;this.$post("/common/auth/method",{redirect_url:this.$route.query.redirect_url}).then((function(n){t.thirdPartyList=n||[]}))},thirdPartyIconClick:function(t){window.open(t,"_self")}}},u=i,s=e("2877"),d=Object(s["a"])(u,a,o,!1,null,null,null);n["default"]=d.exports},"4ec3":function(t,n,e){"use strict";e.d(n,"d",(function(){return o})),e.d(n,"c",(function(){return r})),e.d(n,"j",(function(){return c})),e.d(n,"r",(function(){return i})),e.d(n,"y",(function(){return u})),e.d(n,"g",(function(){return s})),e.d(n,"f",(function(){return d})),e.d(n,"p",(function(){return m})),e.d(n,"q",(function(){return l})),e.d(n,"t",(function(){return f})),e.d(n,"n",(function(){return h})),e.d(n,"o",(function(){return p})),e.d(n,"l",(function(){return g})),e.d(n,"k",(function(){return b})),e.d(n,"h",(function(){return y})),e.d(n,"e",(function(){return _})),e.d(n,"u",(function(){return v})),e.d(n,"b",(function(){return w})),e.d(n,"a",(function(){return O})),e.d(n,"v",(function(){return j})),e.d(n,"w",(function(){return $})),e.d(n,"x",(function(){return k})),e.d(n,"m",(function(){return C})),e.d(n,"s",(function(){return x})),e.d(n,"i",(function(){return D}));var a=e("1c1e"),o=function(t){return Object(a["a"])({url:"/admin/document/create",data:t,method:"post"})},r=function(t){return Object(a["a"])({url:"/admin/chapter/create",data:t,method:"post"})},c=function(t){return Object(a["a"])({url:"/admin/document/chapterapi/getApiLabel",params:t,method:"get"})},i=function(t){return Object(a["a"])({url:"/admin/chapter/save",data:t,method:"post"})},u=function(t){return Object(a["a"])({url:"/admin/chapter/content",data:t,method:"post"})},s=function(t){return Object(a["a"])({url:"/admin/document/all",data:t,method:"post"})},d=function(t){return Object(a["a"])({url:"/admin/chapter/detail",data:t,method:"post"})},m=function(t){return Object(a["a"])({url:"/common/auth/getlogouturl",params:t,method:"get"})},l=function(t){return Object(a["a"])({url:"/document/chapter/record",data:t,method:"post"})},f=function(t){return Object(a["a"])({url:"/install/systemDetection",data:t,method:"post"})},h=function(t){return Object(a["a"])({url:"/install/install",data:t,method:"post"})},p=function(t){return Object(a["a"])({url:"/install/config",data:t,method:"post"})},g=function(t){return Object(a["a"])({url:"/admin/user/all",data:t,method:"post"})},b=function(t){return Object(a["a"])({url:"/document/chapter/search",data:t,method:"post"})},y=function(t){return Object(a["a"])({url:"/document/detail",data:t,method:"post"})},_=function(t){return Object(a["a"])({url:"/admin/document/delete",data:t,method:"post"})},v=function(t){return Object(a["a"])({url:"/common/auth/third-party-login-bind",data:t,method:"post"})},w=function(t){return Object(a["a"])({url:"/common/auth/changeThirdPartyUser",data:t,method:"post"})},O=function(t){return Object(a["a"])({url:"/common/auth/bindThirdPartyUser",data:t,method:"post"})},j=function(t){return Object(a["a"])({url:"/common/auth/ThirdPartyUserCacheIn",data:t,method:"post"})},$=function(t){return Object(a["a"])({url:"https://api.w7.cc/oauth/authorize/try-sync-login",data:t,method:"post"})},k=function(t){return Object(a["a"])({url:"/common/auth/unbind",data:t,method:"post"})},C=function(t){return Object(a["a"])({url:"/admin/chapter/import ",data:t,method:"post"})},x=function(t){return Object(a["a"])({url:"/admin/document/chapterapi/setApiData",data:t,method:"post"})},D=function(t){return Object(a["a"])({url:"/admin/document/new-feedback",data:t,method:"post"})}}}]);