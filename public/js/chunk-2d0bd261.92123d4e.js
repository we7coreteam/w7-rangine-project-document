(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd261"],{"2b83":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"admin-login"},[o("div",{staticClass:"login-box"},[o("h2",[t._v("文档管理系统")]),o("el-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[o("el-tab-pane",{attrs:{label:"账号登录",name:"first"}},[o("div",{staticClass:"login-form"},[o("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"用户名/手机号"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}}),o("el-input",{attrs:{type:"password","prefix-icon":"el-icon-s-goods",placeholder:"输入密码"},model:{value:t.formData.userpass,callback:function(e){t.$set(t.formData,"userpass",e)},expression:"formData.userpass"}}),o("el-input",{staticClass:"code-input",attrs:{"prefix-icon":"el-icon-s-goods",placeholder:"输入图形验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}},[o("img",{attrs:{slot:"append",src:t.code,alt:""},on:{click:t.getCode},slot:"append"})])],1),t.thirdPartyList.length?o("div",{staticClass:"login-thirdParty"},[o("span",{staticClass:"title"},[t._v("第三方账号登录")]),o("div",{staticClass:"icon-list"},t._l(t.thirdPartyList,(function(e){return o("img",{key:e.name,staticClass:"icon-block",attrs:{src:e.logo,title:e.name},on:{click:function(o){return t.thirdPartyIconClick(e.redirect_url)}}})})),0)]):t._e(),o("el-button",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")])],1)],1)],1),t._m(0)])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer"},[t._v("\n    Powered by "),o("a",{attrs:{href:"https://www.w7.cc"}},[t._v("微擎云计算©www.w7.cc")])])}],i=o("1c1e"),s={name:"adminLogin",data:function(){return{autofocus:!1,active:"first",code:"",formData:{username:"",userpass:"",code:""},thirdPartyList:[]}},beforeRouteEnter:function(t,e,o){var a=t.query.code,n=t.query.redirect_url,s=t.query.app_id;a?i["a"].post("/common/auth/third-party-login",{code:a,app_id:s}).then((function(t){t&&t.is_need_bind?o("/bind"):n?window.open(n,"_self"):o("/admin/document")})).catch((function(){o("/admin-login")})):i["a"].post("/common/auth/default-login-url").then((function(t){t.data?window.open(t.data,"_self"):o()}))},created:function(){this.getCode(),this.getThirdParty()},methods:{showFind:function(){this.$message({message:"请联系管理员修改或使用密码找回工具修改"})},getCode:function(){var t=this;this.$post("/common/verifycode/image").then((function(e){200==e.code?t.code=e.data.img:t.$message.error(e.message)}))},login:function(){var t=this;this.$post("/common/auth/login",this.formData).then((function(){var e=t.$message("登录成功");setTimeout((function(){e.close();var o=localStorage.recordHref;o?location.href=o:t.$router.push("/admin/document")}),500)})).catch((function(){t.formData.code="",document.getElementsByClassName("el-input__inner")[2].focus(),t.getCode()}))},getThirdParty:function(){var t=this;this.$post("/common/auth/method",{redirect_url:localStorage.recordHref||this.$route.query.redirect_url}).then((function(e){t.thirdPartyList=e.data||[]}))},thirdPartyIconClick:function(t){window.open(t,"_self")}}},r=s,c=o("2877"),l=Object(c["a"])(r,a,n,!1,null,null,null);e["default"]=l.exports}}]);