(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b180119"],{"091d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-thirdParty"},[a("div",{staticClass:"page-head"},[t._v(t._s(t.formData.setting.name)+"授权设置")]),a("el-form",{ref:"thirdPartyForm",staticClass:"we7-panel-form",class:{edit:t.editStatus},attrs:{"status-icon":"","label-position":"left","label-width":"290px",model:t.formData,rules:t.rules}},[a("div",{staticClass:"we7-panel-form__header"},[t._v("\n      授权配置\n    ")]),a("div",{staticClass:"we7-panel-form__body edit"},[a("el-form-item",{attrs:{label:t.formData.setting.name+"授权登录"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.change},model:{value:t.formData.setting.enable,callback:function(e){t.$set(t.formData.setting,"enable",e)},expression:"formData.setting.enable"}})],1)],1),a("div",{staticClass:"we7-panel-form__header"},[t._v("登录配置")]),a("div",{staticClass:"we7-panel-form__body"},[a("el-form-item",{attrs:{label:"unionid"}},[a("span",[t._v(t._s(t.$route.query.id))])]),a("el-form-item",{attrs:{label:"第三方名称",prop:"setting.name"}},[t.editStatus&&!t.formData.is_default?a("el-input",{model:{value:t.formData.setting.name,callback:function(e){t.$set(t.formData.setting,"name",e)},expression:"formData.setting.name"}}):a("span",[t._v(t._s(t.formData.setting.name))])],1),t.formData.is_default?t._e():a("el-form-item",{attrs:{label:"LOGO",prop:"setting.logo"}},[t.editStatus?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/admin/upload/image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.formData.setting.logo?a("img",{staticClass:"avatar",attrs:{src:t.formData.setting.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):a("img",{staticClass:"avatar",attrs:{src:t.formData.setting.logo}})],1),a("el-form-item",{attrs:{label:"APPID",prop:"setting.app_id"}},[t.editStatus?a("el-input",{model:{value:t.formData.setting.app_id,callback:function(e){t.$set(t.formData.setting,"app_id",e)},expression:"formData.setting.app_id"}}):a("span",[t._v(t._s(t.formData.setting.app_id))])],1),a("el-form-item",{attrs:{label:"SERCETkey",prop:"setting.secret_key"}},[t.editStatus?a("el-input",{model:{value:t.formData.setting.secret_key,callback:function(e){t.$set(t.formData.setting,"secret_key",e)},expression:"formData.setting.secret_key"}}):a("span",[t._v(t._s(t.formData.setting.secret_key))])],1),t.formData.is_default?t._e():a("el-form-item",{attrs:{label:"ACCESSTOKEN  API地址",prop:"setting.access_token_url"}},[t.editStatus?a("el-input",{model:{value:t.formData.setting.access_token_url,callback:function(e){t.$set(t.formData.setting,"access_token_url",e)},expression:"formData.setting.access_token_url"}}):a("span",[t._v(t._s(t.formData.setting.access_token_url))])],1),t.formData.is_default?t._e():a("el-form-item",{attrs:{label:"获取用户信息  API地址",prop:"setting.user_info_url"}},[t.editStatus?a("el-input",{model:{value:t.formData.setting.user_info_url,callback:function(e){t.$set(t.formData.setting,"user_info_url",e)},expression:"formData.setting.user_info_url"}}):a("span",[t._v(t._s(t.formData.setting.user_info_url))])],1),"QQ"==t.formData.setting.name?a("el-form-item",{attrs:{label:"回调地址"}},[a("span",[t._v(t._s(t.callbackUrl))])]):t._e()],1),t.formData.is_default?t._e():[a("div",{staticClass:"we7-panel-form__header"},[a("span",[t._v("转换功能")])]),a("div",{staticClass:"we7-panel-form__body"},[a("el-form-item",{attrs:{label:"uid"}},[t.editStatus?a("el-input",{model:{value:t.formData.convert.uid,callback:function(e){t.$set(t.formData.convert,"uid",e)},expression:"formData.convert.uid"}}):t._e(),t.editStatus?a("div",{staticClass:"we7-help-block"},[t._v("请填写第三方系统用户id的字段")]):a("span",[t._v(t._s(t.formData.convert.uid))])],1),a("el-form-item",{attrs:{label:"username"}},[t.editStatus?a("el-input",{model:{value:t.formData.convert.username,callback:function(e){t.$set(t.formData.convert,"username",e)},expression:"formData.convert.username"}}):t._e(),t.editStatus?a("div",{staticClass:"we7-help-block"},[t._v("请填写第三方系统用户名的字段")]):a("span",[t._v(t._s(t.formData.convert.username))])],1)],1)]],2),t.editStatus?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editStatus=!0}}},[t._v("编辑")]),t.editStatus?[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.editStatus=!1}}},[t._v("取消")])]:t._e()],2)},i=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("ade3"));a("7f7f");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={data:function(){return{editStatus:!1,formData:{is_default:!1,setting:{name:"",enable:"",logo:"",app_id:"",secret_key:"",access_token_url:"",user_info_url:""},convert:{uid:"",username:""}},rules:{"setting.name":[{required:!0,message:"请填写第三方名称",trigger:"blur"}],"setting.logo":[{required:!0,message:"请上传LOGO",trigger:"blur"}],"setting.app_id":[{required:!0,message:"请填写APPID",trigger:"blur"}],"setting.secret_key":[{required:!0,message:"请填写SERCETkey",trigger:"blur"}],"setting.access_token_url":[{required:!0,message:"请填写ACCESSTOKEN",trigger:"blur"}],"setting.user_info_url":[{required:!0,message:"请填写获取用户信息",trigger:"blur"}]},callbackUrl:""}},watch:{$route:{handler:function(){this.init()},deep:!0}},created:function(){this.init(),this.callbackUrl="http://"+window.location.host+"/common/auth/third-party-login"},methods:{init:function(){var t=this;this.$post("/admin/third-party-login/detail",{id:this.$route.query.id}).then((function(e){t.formData.is_default=e.data.is_default,t.formData.setting={name:e.data.setting.name||"",enable:e.data.setting.enable||"",logo:e.data.setting.logo||"",app_id:e.data.setting.app_id||"",secret_key:e.data.setting.secret_key||"",access_token_url:e.data.setting.access_token_url||"",user_info_url:e.data.setting.user_info_url||""},t.formData.convert=e.data.convert||{}}))},handleAvatarSuccess:function(t){this.formData.setting.logo=t.data.url},beforeAvatarUpload:function(t){var e="image/jpg"===t.type||"image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传LOGO只支持jpg、jpeg、png格式!"),a||this.$message.error("上传LOGO大小不能超过 2MB!"),e&&a},change:function(){var t=this,e=!1;for(var a in this.formData.setting)if(!this.formData.setting[a]&&"enable"!=a){e=!0;break}if(e)return this.$message("请填写必填项！"),void(this.formData.setting.enable=1==this.formData.setting.enable?0:1);var r={id:this.$route.query.id,setting:o({},this.formData.setting)};this.formData.is_default||(r["convert"]=o({},this.formData.convert)),this.$post("/admin/third-party-login/update",r).then((function(){t.$message("修改成功！")}))},save:function(){var t=this;this.$refs.thirdPartyForm.validate((function(e){if(e){var a={id:t.$route.query.id,setting:o({},t.formData.setting)};t.formData.is_default||(a["convert"]=o({},t.formData.convert)),t.$post("/admin/third-party-login/update",a).then((function(){t.$message("修改成功！"),t.editStatus=!1,t.$emit("refreshMenu",!0)}))}else t.editStatus=!0}))}}},c=l,u=(a("21f8"),a("2877")),f=Object(u["a"])(c,r,i,!1,null,null,null);e["default"]=f.exports},"11e9":function(t,e,a){var r=a("52a7"),i=a("4630"),s=a("6821"),n=a("6a99"),o=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=s(t),e=n(e,!0),l)try{return c(t,e)}catch(a){}if(o(t,e))return i(!r.f.call(t,e),t[e])}},"21f8":function(t,e,a){"use strict";a("e850")},"456d":function(t,e,a){var r=a("4bf8"),i=a("0d58");a("5eda")("keys",(function(){return function(t){return i(r(t))}}))},"5eda":function(t,e,a){var r=a("5ca1"),i=a("8378"),s=a("79e5");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],n={};n[t]=e(a),r(r.S+r.F*s((function(){a(1)})),"Object",n)}},"8e6e":function(t,e,a){var r=a("5ca1"),i=a("990b"),s=a("6821"),n=a("11e9"),o=a("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,r=s(t),l=n.f,c=i(r),u={},f=0;while(c.length>f)a=l(r,e=c[f++]),void 0!==a&&o(u,e,a);return u}})},9093:function(t,e,a){var r=a("ce10"),i=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"990b":function(t,e,a){var r=a("9093"),i=a("2621"),s=a("cb7c"),n=a("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=r.f(s(t)),a=i.f;return a?e.concat(a(t)):e}},ac6a:function(t,e,a){for(var r=a("cadf"),i=a("0d58"),s=a("2aba"),n=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),f=c("toStringTag"),m=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),g=0;g<p.length;g++){var _,v=p[g],b=d[v],D=n[v],h=D&&D.prototype;if(h&&(h[u]||o(h,u,m),h[f]||o(h,f,v),l[v]=m,b))for(_ in r)h[_]||s(h,_,r[_],!0)}},ade3:function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return r}))},e850:function(t,e,a){},f1ae:function(t,e,a){"use strict";var r=a("86cc"),i=a("4630");t.exports=function(t,e,a){e in t?r.f(t,e,i(0,a)):t[e]=a}}}]);