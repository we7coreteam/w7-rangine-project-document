(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6112b2"],{"02f4":function(e,t,r){var n=r("4588"),i=r("be13");e.exports=function(e){return function(t,r){var a,s,c=String(i(t)),o=n(r),_=c.length;return o<0||o>=_?e?"":void 0:(a=c.charCodeAt(o),a<55296||a>56319||o+1===_||(s=c.charCodeAt(o+1))<56320||s>57343?e?c.charAt(o):a:e?c.slice(o,o+2):s-56320+(a-55296<<10)+65536)}}},"0390":function(e,t,r){"use strict";var n=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"07ed":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8e6e"),core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es7_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__),D_project_ued_document_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ade3"),vuex__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2f62"),_api_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4ec3");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){Object(D_project_ued_document_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}__webpack_exports__["a"]={name:"searchResults",data:function(){return{document_id:"",document_name:"",chapters:[],defaultProps:{children:"children",label:"name"},selectChapterId:"",expandIdArray:[],loading:"",total:0,list:[],listQuery:{page:1,page_size:10,keywords:"",document_id:""}}},computed:_objectSpread(_objectSpread({},Object(vuex__WEBPACK_IMPORTED_MODULE_7__["b"])({UserInfo:"UserInfo"})),{},{paginationLayouts:function(){return this.total&&this.total/this.listQuery.page_size>1?"total, sizes, prev, pager, next, jumper":"total, sizes"}}),watch:{},created:function(){this.init()},mounted:function(){},methods:{init:function(){var e=this;this.listQuery.document_id=this.$route.query.id,this.document_id=this.$route.query.id,this.listQuery.keywords=this.$route.query.keywords,Object(_api_api__WEBPACK_IMPORTED_MODULE_8__["j"])({document_id:this.listQuery.document_id}).then((function(t){e.document_name=t.data.name,e.getChapters()})),this.getSearchResults()},getSearchResults:function getSearchResults(){var _this2=this,keywords=this.listQuery.keywords.toLowerCase(),id=this.listQuery.document_id;this.$router.push({query:{id:id,keywords:keywords}}),Object(_api_api__WEBPACK_IMPORTED_MODULE_8__["n"])(this.listQuery).then((function(res){_this2.total=res.data.total,_this2.list=res.data.data,_this2.list.length&&_this2.list.forEach((function(item){var reg="/"+keywords+"/gi";if(item.content){item.content=item.content.replace(/[\-\_\,\!\|\~\`\(\)\#\$\%\^\&\*\{\}\:\;\"\<\>\?]/g,""),item.content=item.content.replace(/^[A-Za-z]+$/g,(function(e){return e.toLowerCase()})),item.content=item.content.replace(/(cdn\.w7\.cc)(.|\/)+\.(jpg|png|jpeg)/g,""),item.content=item.content.replace(/(http)(.|\/)+\.(jpg|png|jpeg)/g,""),item.content=item.content.replace(/\.(jpg|png|jpeg)/g,"");var hasKeywords=item.content.indexOf(keywords);item.content=-1!=hasKeywords?item.content.substr(item.content.indexOf(keywords),400)+"...":item.content.substr(0,400)+"...",item.content=item.content.replace(eval(reg),'<span style="color: #ff3939">'.concat(keywords,"</span>"))}item.name&&(item.name=item.name.replace(eval(reg),'<span style="color: #ff3939">'.concat(keywords,"</span>"))),item.navigation&&(item.navigation=item.navigation.split(">"))}))})).catch((function(e){}))},getChapters:function(){var e=this;this.$post("/document/chapter/list",{document_id:this.document_id}).then((function(t){t.data.length&&(t.data.forEach((function(e){e.is_dir&&0==e.children.length?e.children.push({is_dir:!1}):e.children.forEach((function(e){e.is_dir&&0==e.children.length&&e.children.push({is_dir:!1})}))})),e.chapters=t.data,e.$nextTick((function(){if(e.$route.query.id){e.selectChapterId=e.$route.query.id;var r="",n=function e(t,n){t.forEach((function(t){t.children.length||e(t.children),t.id!=n||(r=t.name)}))};n(e.chapters,e.selectChapterId),e.selectNode(e.selectChapterId),document.title=r?r+" — "+e.document_name:e.document_name}else t.data.length&&(e.selectNode(t.data[0].id),e.handleNodeClick(t.data[0]))})))}))},goDefaultChaper:function(e,t){for(var r=0;r<e.length;r++)if(!e[r].is_dir&&(e[r].default_show_chapter_id==e[r].id||t==e[r].id))return this.selectChapterId=e[r].id,void this.changeRoute(this.selectChapterId,e[r].name,!0);for(var n=0;n<e.length;n++)e[n].is_dir&&e[n].children.length&&e[n].children[0].id&&this.goDefaultChaper(e[n].children,e[n].default_show_chapter_id)},handleNodeClick:function(e){e.is_dir?this.$refs.chaptersTree.setCurrentKey():this.changeRoute(e.id,e.name)},handleNodeExpand:function(e){e.default_show_chapter_id&&(this.selectNode(e.default_show_chapter_id),this.changeRoute(e.default_show_chapter_id,e.name))},changeRoute:function(e,t,r){e==this.$route.query.id||(this.selectChapterId=e,this.$router.push({path:"/chapter/"+this.document_id,query:{id:this.selectChapterId}})),r&&this.selectNode(this.selectChapterId),document.title=t+"-"+this.document_name},getArticle:function(){var e={document_id:this.document_id,chapter_id:this.$route.query.id};this.$route.query.share_key&&(e["share_key"]=this.$route.query.share_key),this.loading=this.$loading()},selectNode:function(e){this.$refs.chaptersTree.setCurrentKey(e),this.expandIdArray=[],this.expandIdArray.push(e)},highlight:function(e){var t=this.keyword;e=e.split(""),t=t.split("");var r="";for(var n in e)-1!==t.indexOf(e[n])?r=r+'<span class="highlight">'+e[n]+"</span>":r+=e[n];return r},htmlToWord:function(e){var t=e.replace(/<(style|script|iframe)[^>]*?>[\s\S]+?<\/\1\s*>/gi,"").replace(/<[^>]+?>/g,"").replace(/\s+/g," ").replace(/ /g," ").replace(/>/g," ");return t},getShareKey:function(){var e=this;this.$post("/admin/share/url",{chapter_id:this.$route.query.id,document_id:this.$route.params.id}).then((function(t){e.shareUrl=t.data}))},operStar:function(){var e=this,t=this.articleContent.star_id?"/admin/star/delete":"/admin/star/add",r={document_id:this.$route.params.id};this.articleContent.star_id?r["id"]=this.articleContent.star_id:r["chapter_id"]=this.$route.query.id,this.$post(t,r).then((function(t){e.articleContent.star_id=t.data.star_id||""}))},goViewChapter:function(e){this.$router.push({path:"/chapter/"+this.document_id,query:{id:e.chapter_id}})},handleSizeChange:function(e){this.listQuery.page_size=e,this.getSearchResults()},handleCurrentChange:function(e){this.listQuery.page=e,this.getSearchResults()}}}},"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,r){var n=r("52a7"),i=r("4630"),a=r("6821"),s=r("6a99"),c=r("69a8"),o=r("c69a"),_=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?_:function(e,t){if(e=a(e),t=s(t,!0),o)try{return _(e,t)}catch(r){}if(c(e,t))return i(!n.f.call(e,t),e[t])}},"214f":function(e,t,r){"use strict";r("b0c5");var n=r("2aba"),i=r("32e9"),a=r("79e5"),s=r("be13"),c=r("2b4c"),o=r("520a"),_=c("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var d=c(e),p=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=p?!a((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[_]=function(){return r}),r[d](""),!t})):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!l){var f=/./[d],g=r(s,d,""[e],(function(e,t,r,n,i){return t.exec===o?p&&!i?{done:!0,value:f.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),v=g[0],m=g[1];n(String.prototype,e,v),i(RegExp.prototype,d,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},"28a5":function(e,t,r){"use strict";var n=r("aae3"),i=r("cb7c"),a=r("ebd6"),s=r("0390"),c=r("9def"),o=r("5f1b"),_=r("520a"),u=r("79e5"),l=Math.min,d=[].push,p="split",h="length",f="lastIndex",g=4294967295,v=!u((function(){RegExp(g,"y")}));r("214f")("split",2,(function(e,t,r,u){var m;return m="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(i,e,t);var a,s,c,o=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,p=void 0===t?g:t>>>0,v=new RegExp(e.source,u+"g");while(a=_.call(v,i)){if(s=v[f],s>l&&(o.push(i.slice(l,a.index)),a[h]>1&&a.index<i[h]&&d.apply(o,a.slice(1)),c=a[0][h],l=s,o[h]>=p))break;v[f]===a.index&&v[f]++}return l===i[h]?!c&&v.test("")||o.push(""):o.push(i.slice(l)),o[h]>p?o.slice(0,p):o}:"0"[p](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var i=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,n):m.call(String(i),r,n)},function(e,t){var n=u(m,e,this,t,m!==r);if(n.done)return n.value;var _=i(e),d=String(this),p=a(_,RegExp),h=_.unicode,f=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(v?"y":"g"),y=new p(v?_:"^(?:"+_.source+")",f),b=void 0===t?g:t>>>0;if(0===b)return[];if(0===d.length)return null===o(y,d)?[d]:[];var E=0,w=0,C=[];while(w<d.length){y.lastIndex=v?w:0;var O,x=o(y,v?d:d.slice(w));if(null===x||(O=l(c(y.lastIndex+(v?0:w)),d.length))===E)w=s(d,w,h);else{if(C.push(d.slice(E,w)),C.length===b)return C;for(var k=1;k<=x.length-1;k++)if(C.push(x[k]),C.length===b)return C;w=E=O}}return C.push(d.slice(E)),C}]}))},"39ca":function(e,t,r){"use strict";r("731d")},"520a":function(e,t,r){"use strict";var n=r("0bfb"),i=RegExp.prototype.exec,a=String.prototype.replace,s=i,c="lastIndex",o=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[c]||0!==t[c]}(),_=void 0!==/()??/.exec("")[1],u=o||_;u&&(s=function(e){var t,r,s,u,l=this;return _&&(r=new RegExp("^"+l.source+"$(?!\\s)",n.call(l))),o&&(t=l[c]),s=i.call(l,e),o&&s&&(l[c]=l.global?s.index+s[0].length:t),_&&s&&s.length>1&&a.call(s[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s},"5f1b":function(e,t,r){"use strict";var n=r("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var a=r.call(e,t);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},6103:function(e,t,r){"use strict";r("d8f8")},"6d70":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"document-name"},[e._v(e._s(e.document_name))]),r("div",{staticClass:"chapter-warpper"},[r("el-scrollbar",[r("el-container",{staticClass:"home-container"},[r("el-aside",{staticClass:"w7-aside-home"},[r("div",{staticClass:"w7-aside-home-box"},[r("el-scrollbar",{staticClass:"w7-aside-home-content"},[e.chapters.length?r("el-tree",{ref:"chaptersTree",staticClass:"w7-tree",attrs:{data:e.chapters,props:e.defaultProps,"empty-text":"","node-key":"id","highlight-current":!0,"default-expanded-keys":e.expandIdArray},on:{"node-click":e.handleNodeClick,"node-expand":e.handleNodeExpand},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return n.label?r("span",{staticClass:"custom-tree-node",class:{doc:!i.is_dir}},[r("div",{staticClass:"text-over"},[r("span",{class:["dir",i.is_dir?"dir"+n.level:"",n.level?"level"+n.level:""],attrs:{title:n.label}},[e._v(e._s(n.label))])])]):e._e()}}],null,!0)}):e._e()],1)],1)]),r("el-main",{attrs:{id:"home-index"}},[r("div",{staticClass:"warpper"},[r("div",{staticClass:"search-results"},[r("mavon-editor",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"mavonEditor"}),r("div",{staticClass:"search-wrap"},[r("div",{staticClass:"total"},[e._v("搜索"),r("span",[e._v("“"+e._s(e.listQuery.keywords)+"”")]),e._v("的相关结果，共"+e._s(e.total)+"条")]),r("el-input",{attrs:{placeholder:"请输入关键字搜索",maxlength:"10"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchResults(t)}},model:{value:e.listQuery.keywords,callback:function(t){e.$set(e.listQuery,"keywords",t)},expression:"listQuery.keywords"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.getSearchResults},slot:"suffix"})])],1),r("div",{staticClass:"list"},e._l(e.list,(function(t,n){return r("div",{key:n,staticClass:"con",on:{click:function(r){return e.goViewChapter(t)}}},[r("div",{staticClass:"name",domProps:{innerHTML:e._s(t.name)}}),r("div",{staticClass:"content",domProps:{innerHTML:e._s(t.content)}}),r("div",{staticClass:"navigation"},[e._l(t.navigation,(function(n,i){return[r("span",[e._v(e._s(n))]),i<t.navigation.length-1?r("span",{staticStyle:{margin:"0 3px"}},[e._v(">")]):e._e()]}))],2)])})),0)],1),r("div",{staticClass:"pagination-wrap"},[r("el-pagination",{attrs:{background:"","hide-on-single-page":e.total<=10,"current-page":e.listQuery.page,"page-sizes":[10,20,30],"page-size":e.listQuery.page_size,layout:e.paginationLayouts,total:e.total},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])],1)],1),r("el-backtop",{attrs:{bottom:100}},[r("div",{staticClass:"w7-top"},[r("i",{staticClass:"el-icon-arrow-up"}),r("p",[e._v("TOP")])])])],1)])},i=[],a=r("07ed"),s=a["a"],c=(r("6103"),r("39ca"),r("2877")),o=Object(c["a"])(s,n,i,!1,null,"731e09c6",null);t["default"]=o.exports},"731d":function(e,t,r){},"8e6e":function(e,t,r){var n=r("5ca1"),i=r("990b"),a=r("6821"),s=r("11e9"),c=r("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,r,n=a(e),o=s.f,_=i(n),u={},l=0;while(_.length>l)r=o(n,t=_[l++]),void 0!==r&&c(u,t,r);return u}})},9093:function(e,t,r){var n=r("ce10"),i=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"990b":function(e,t,r){var n=r("9093"),i=r("2621"),a=r("cb7c"),s=r("7726").Reflect;e.exports=s&&s.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},a481:function(e,t,r){"use strict";var n=r("cb7c"),i=r("4bf8"),a=r("9def"),s=r("4588"),c=r("0390"),o=r("5f1b"),_=Math.max,u=Math.min,l=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,(function(e,t,r,f){return[function(n,i){var a=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,a,i):r.call(String(a),n,i)},function(e,t){var i=f(r,e,this,t);if(i.done)return i.value;var l=n(e),d=String(this),p="function"===typeof t;p||(t=String(t));var v=l.global;if(v){var m=l.unicode;l.lastIndex=0}var y=[];while(1){var b=o(l,d);if(null===b)break;if(y.push(b),!v)break;var E=String(b[0]);""===E&&(l.lastIndex=c(d,a(l.lastIndex),m))}for(var w="",C=0,O=0;O<y.length;O++){b=y[O];for(var x=String(b[0]),k=_(u(s(b.index),d.length),0),P=[],D=1;D<b.length;D++)P.push(h(b[D]));var j=b.groups;if(p){var M=[x].concat(P,k,d);void 0!==j&&M.push(j);var R=String(t.apply(void 0,M))}else R=g(x,d,k,P,j,t);k>=C&&(w+=d.slice(C,k)+R,C=k+x.length)}return w+d.slice(C)}];function g(e,t,n,a,s,c){var o=n+e.length,_=a.length,u=p;return void 0!==s&&(s=i(s),u=d),r.call(c,u,(function(r,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(o);case"<":c=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return r;if(u>_){var d=l(u/10);return 0===d?r:d<=_?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):r}c=a[u-1]}return void 0===c?"":c}))}}))},aae3:function(e,t,r){var n=r("d3f4"),i=r("2d95"),a=r("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},ade3:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},b0c5:function(e,t,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},d8f8:function(e,t,r){},f1ae:function(e,t,r){"use strict";var n=r("86cc"),i=r("4630");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}}}]);