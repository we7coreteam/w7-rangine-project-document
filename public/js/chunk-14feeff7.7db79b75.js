(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14feeff7"],{"02f4":function(e,t,a){var n=a("4588"),i=a("be13");e.exports=function(e){return function(t,a){var r,o,c=String(i(t)),s=n(a),l=c.length;return s<0||s>=l?e?"":void 0:(r=c.charCodeAt(s),r<55296||r>56319||s+1===l||(o=c.charCodeAt(s+1))<56320||o>57343?e?c.charAt(s):r:e?c.slice(s,s+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var n=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},"0454":function(e,t,a){"use strict";a("fa9a")},"0bfb":function(e,t,a){"use strict";var n=a("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,a){var n=a("52a7"),i=a("4630"),r=a("6821"),o=a("6a99"),c=a("69a8"),s=a("c69a"),l=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?l:function(e,t){if(e=r(e),t=o(t,!0),s)try{return l(e,t)}catch(a){}if(c(e,t))return i(!n.f.call(e,t),e[t])}},1914:function(e,t,a){},"214f":function(e,t,a){"use strict";a("b0c5");var n=a("2aba"),i=a("32e9"),r=a("79e5"),o=a("be13"),c=a("2b4c"),s=a("520a"),l=c("species"),u=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var f=c(e),p=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=p?!r((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[l]=function(){return a}),a[f](""),!t})):void 0;if(!p||!g||"replace"===e&&!u||"split"===e&&!d){var m=/./[f],h=a(o,f,""[e],(function(e,t,a,n,i){return t.exec===s?p&&!i?{done:!0,value:m.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}})),v=h[0],b=h[1];n(String.prototype,e,v),i(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var n=a("aae3"),i=a("cb7c"),r=a("ebd6"),o=a("0390"),c=a("9def"),s=a("5f1b"),l=a("520a"),u=a("79e5"),d=Math.min,f=[].push,p="split",g="length",m="lastIndex",h=4294967295,v=!u((function(){RegExp(h,"y")}));a("214f")("split",2,(function(e,t,a,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!n(e))return a.call(i,e,t);var r,o,c,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?h:t>>>0,v=new RegExp(e.source,u+"g");while(r=l.call(v,i)){if(o=v[m],o>d&&(s.push(i.slice(d,r.index)),r[g]>1&&r.index<i[g]&&f.apply(s,r.slice(1)),c=r[0][g],d=o,s[g]>=p))break;v[m]===r.index&&v[m]++}return d===i[g]?!c&&v.test("")||s.push(""):s.push(i.slice(d)),s[g]>p?s.slice(0,p):s}:"0"[p](void 0,0)[g]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,n){var i=e(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,i,n):b.call(String(i),a,n)},function(e,t){var n=u(b,e,this,t,b!==a);if(n.done)return n.value;var l=i(e),f=String(this),p=r(l,RegExp),g=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),_=new p(v?l:"^(?:"+l.source+")",m),y=void 0===t?h:t>>>0;if(0===y)return[];if(0===f.length)return null===s(_,f)?[f]:[];var x=0,w=0,C=[];while(w<f.length){_.lastIndex=v?w:0;var D,k=s(_,v?f:f.slice(w));if(null===k||(D=d(c(_.lastIndex+(v?0:w)),f.length))===x)w=o(f,w,g);else{if(C.push(f.slice(x,w)),C.length===y)return C;for(var j=1;j<=k.length-1;j++)if(C.push(k[j]),C.length===y)return C;w=x=D}}return C.push(f.slice(x)),C}]}))},"2b13":function(e,t,a){"use strict";a("1914")},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3b2b":function(e,t,a){var n=a("7726"),i=a("5dbc"),r=a("86cc").f,o=a("9093").f,c=a("aae3"),s=a("0bfb"),l=n.RegExp,u=l,d=l.prototype,f=/a/g,p=/a/g,g=new l(f)!==f;if(a("9e1e")&&(!g||a("79e5")((function(){return p[a("2b4c")("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")})))){l=function(e,t){var a=this instanceof l,n=c(e),r=void 0===t;return!a&&n&&e.constructor===l&&r?e:i(g?new u(n&&!r?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&r?s.call(e):t),a?this:d,l)};for(var m=function(e){e in l||r(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},h=o(u),v=0;h.length>v;)m(h[v++]);d.constructor=l,l.prototype=d,a("2aba")(n,"RegExp",l)}a("7a56")("RegExp")},"49f7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-setting"},[e.showAddManage||e.feedDetailVisible?e._e():a("div",{staticClass:"document-setting-warpper"},[a("div",{staticClass:"nav"},[a("div",{staticClass:"nav-item",class:{active:0==e.active},on:{click:function(t){return e.onClickNav(0)}}},[0==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          项目概览\n        ")]),a("div",{staticClass:"nav-item",class:{active:1==e.active},on:{click:function(t){return e.onClickNav(1)}}},[1==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          权限管理\n        ")]),a("div",{staticClass:"nav-item",class:{active:2==e.active},on:{click:function(t){return e.onClickNav(2)}}},[2==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          历史记录\n        ")]),a("div",{staticClass:"nav-item",class:{active:3==e.active},on:{click:function(t){return e.onClickNav(3)}}},[3==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n          反馈建议\n          "),e.newFeed?a("span",{staticClass:"redDot"}):e._e()])]),a("div",{staticClass:"content"},[0==e.active?a("div",{staticClass:"project"},[a("el-form",{key:"doc",ref:"docForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.docData,rules:e.rules,"label-width":"85px","label-position":"left"}},[a("el-form-item",{staticClass:"cover-warpper",attrs:{label:"项目封面"}},[a("div",{staticClass:"upload-wrap"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"cover-img"},[e.docData.cover?a("img",{attrs:{src:e.docData.cover}}):e._e()])]),a("div",{staticClass:"cover-btn"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary",plain:""}},[e._v("上传封面")])],1),a("el-button",{staticClass:"cover-default",on:{click:function(t){e.docData.cover=""}}},[e._v("默认封面")])],1)],1),a("div",{staticClass:"el-upload__tip"},[e._v("格式要求：支持jpg、jpeg、png格式，图片小于5M，最佳图片比例2:1。")])]),a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.docData.name,callback:function(t){e.$set(e.docData,"name",t)},expression:"docData.name"}})],1),a("el-form-item",{attrs:{label:"公开性质"}},[a("el-select",{model:{value:e.docData.is_public,callback:function(t){e.$set(e.docData,"is_public",t)},expression:"docData.is_public"}},[a("el-option",{attrs:{label:"公开项目",value:"1"}}),a("el-option",{attrs:{label:"私有项目",value:"2"}})],1)],1),1!=e.docData.is_public?a("el-form-item",{attrs:{label:"查看权限"}},[a("el-select",{model:{value:e.docData.login_preview,callback:function(t){e.$set(e.docData,"login_preview",t)},expression:"docData.login_preview"}},[a("el-option",{attrs:{label:"仅限有权限者查看",value:"2"}}),a("el-option",{attrs:{label:"点击链接登录后查看",value:"3"}})],1)],1):e._e()],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveDoc}},[e._v("保存")]),a("el-button",{on:{click:e.delDoc}},[e._v("删除")])],1)],1):e._e(),1==e.active?a("div",{staticClass:"manage"},[a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openAddManage}},[e._v("添加权限")])],1),a("el-table",{key:"manageTable",staticClass:"w7-table",attrs:{"max-height":"370",data:e.details.operator,"header-cell-style":{background:"#f7f9fc",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"username",label:"名称",width:"300px"}}),a("el-table-column",{attrs:{label:"身份",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.shwoEditRole&&e.selectUserId==t.row.id?a("el-select",{staticClass:"edit-role-change",on:{change:e.editRole},model:{value:e.selectUserRole,callback:function(t){e.selectUserRole=t},expression:"selectUserRole"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):[1==t.row.acl.role?a("div",{staticClass:"identity"},[e._v(e._s(t.row.acl.name))]):[e._v(e._s(t.row.acl.name))]]]}}],null,!1,505741635)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"oper"},[2==e.details.is_public?a("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"bottom"}},[e.details.acl.has_manage&&1!=t.row.acl.role?a("i",{staticClass:"wi wi-edit",on:{click:function(a){return a.stopPropagation(),e.editManage(t.row)}}}):e._e()]):e._e(),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[e.details.acl.has_manage&&1!=t.row.acl.role?a("i",{staticClass:"wi wi-delete",on:{click:function(a){return e.removeManage(t.row.id)}}}):e._e()])],1)}}],null,!1,519701077)})],1)],1):e._e(),2==e.active?a("div",{staticClass:"history"},[a("el-table",{key:"historyTable",ref:"historyTableRef",staticClass:"w7-table",attrs:{data:e.historyList,"max-height":"370"}},[a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{prop:"time",label:"时间",align:"right"}})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total","prev-text":"上一页","next-text":"下一页","page-size":5,"current-page":e.currentPageHistory,"page-count":e.pageCountHistory,"hide-on-single-page":!0},on:{"current-change":e.getHistory,"update:currentPage":function(t){e.currentPageHistory=t},"update:current-page":function(t){e.currentPageHistory=t}}})],1):e._e(),3==e.active?a("div",{staticClass:"feed"},[a("el-table",{key:"feedTable",ref:"feedTableRef",staticClass:"w7-table",attrs:{data:e.feedList,"max-height":"370"}},[a("el-table-column",{attrs:{prop:"type_name",label:"问题类型",align:"center"}}),a("el-table-column",{attrs:{prop:"created_at",label:"时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.getFeedDetail(t.row)}}},[e._v("查看详情")])],1)]}}],null,!1,1946360409)})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total","prev-text":"上一页","next-text":"下一页","page-size":5,"current-page":e.currentPageFeed,"page-count":e.pageCountFeed,"hide-on-single-page":!0},on:{"current-change":e.getFeed,"update:currentPage":function(t){e.currentPageFeed=t},"update:current-page":function(t){e.currentPageFeed=t}}})],1):e._e()])]),e.feedDetailVisible?a("div",{staticClass:"feedDetailHeader"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){e.feedDetailVisible=!1}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("用户反馈详情")]),a("el-link",{attrs:{underline:!1},on:{click:function(t){e.feedDetailVisible=!1}}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),e.feedDetailVisible?a("div",{staticClass:"feedDetail"},[a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("问题类型:")]),a("div",{staticClass:"rig",domProps:{innerHTML:e._s(e.feedType)}})]),a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("意见反馈:")]),a("div",{staticClass:"rig"},[e._v(e._s(e.feedDetail.content))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"lef"},[e._v("反馈截图:")]),a("div",{staticClass:"rig"},e._l(e.feedDetail.images,(function(t,n){return a("el-image",{key:n,staticStyle:{width:"100px",height:"100px","margin-right":"20px"},attrs:{src:t,"preview-src-list":e.feedDetail.images}})})),1)])]):e._e(),e.showAddManage?a("div",{staticClass:"add-manage-header"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("添加权限")]),a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),e.showAddManage?a("div",{staticClass:"add-manage-body"},[a("el-form",{key:"addManage",ref:"addManageForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.addManageData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.addManageData.username,callback:function(t){e.$set(e.addManageData,"username",t)},expression:"addManageData.username"}},e._l(e.userOptions,(function(e){return a("el-option",{key:e.username,attrs:{label:e.username,value:e.username}})})),1)],1),a("el-form-item",{attrs:{label:"权限设置"}},[a("el-select",{model:{value:e.addManageData.role,callback:function(t){e.$set(e.addManageData,"role",t)},expression:"addManageData.role"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"add-manage-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addManage}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.showAddManage=!1}}},[e._v("取 消")])],1)],1):e._e(),a("div",{staticClass:"reset-element"},[a("el-dialog",{staticClass:"delete-doc",attrs:{title:"删除文档",visible:e.deleteDocVisible,width:"570px",center:"",modal:!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.deleteDocVisible=t}}},[a("el-form",{staticStyle:{padding:"0 30px 20px"},attrs:{model:e.deleteDocForm}},[a("el-form-item",{attrs:{label:"文档名称：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.deleteDocForm.name,callback:function(t){e.$set(e.deleteDocForm,"name",t)},expression:"deleteDocForm.name"}}),a("div",{staticClass:"el-form-item__error",staticStyle:{"margin-top":"5px"}},[e._v("删除文档须谨慎操作，一旦删除将无法恢复！")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDocVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.defineDeleteDoc}},[e._v("确 定")])],1)],1)],1)])},i=[],r=a("79ac"),o=r["a"],c=(a("2b13"),a("0454"),a("2877")),s=Object(c["a"])(o,n,i,!1,null,"0f6e17a2",null);t["a"]=s.exports},"4ec3":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"j",(function(){return o})),a.d(t,"r",(function(){return c})),a.d(t,"y",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"p",(function(){return d})),a.d(t,"q",(function(){return f})),a.d(t,"t",(function(){return p})),a.d(t,"n",(function(){return g})),a.d(t,"o",(function(){return m})),a.d(t,"l",(function(){return h})),a.d(t,"k",(function(){return v})),a.d(t,"h",(function(){return b})),a.d(t,"e",(function(){return _})),a.d(t,"u",(function(){return y})),a.d(t,"b",(function(){return x})),a.d(t,"a",(function(){return w})),a.d(t,"v",(function(){return C})),a.d(t,"w",(function(){return D})),a.d(t,"x",(function(){return k})),a.d(t,"m",(function(){return j})),a.d(t,"s",(function(){return M})),a.d(t,"i",(function(){return O}));var n=a("1c1e"),i=function(e){return Object(n["a"])({url:"/admin/document/create",data:e,method:"post"})},r=function(e){return Object(n["a"])({url:"/admin/chapter/create",data:e,method:"post"})},o=function(e){return Object(n["a"])({url:"/admin/document/chapterapi/getApiLabel",data:e,method:"get"})},c=function(e){return Object(n["a"])({url:"/admin/chapter/save",data:e,method:"post"})},s=function(e){return Object(n["a"])({url:"/admin/chapter/content",data:e,method:"post"})},l=function(e){return Object(n["a"])({url:"/admin/document/all",data:e,method:"post"})},u=function(e){return Object(n["a"])({url:"/admin/chapter/detail",data:e,method:"post"})},d=function(e){return Object(n["a"])({url:"/common/auth/getlogouturl",data:e,method:"get"})},f=function(e){return Object(n["a"])({url:"/document/chapter/record",data:e,method:"post"})},p=function(e){return Object(n["a"])({url:"/install/systemDetection",data:e,method:"post"})},g=function(e){return Object(n["a"])({url:"/install/install",data:e,method:"post"})},m=function(e){return Object(n["a"])({url:"/install/config",data:e,method:"post"})},h=function(e){return Object(n["a"])({url:"/admin/user/all",data:e,method:"post"})},v=function(e){return Object(n["a"])({url:"/document/chapter/search",data:e,method:"post"})},b=function(e){return Object(n["a"])({url:"/document/detail",data:e,method:"post"})},_=function(e){return Object(n["a"])({url:"/admin/document/delete",data:e,method:"post"})},y=function(e){return Object(n["a"])({url:"/common/auth/third-party-login-bind",data:e,method:"post"})},x=function(e){return Object(n["a"])({url:"/common/auth/changeThirdPartyUser",data:e,method:"post"})},w=function(e){return Object(n["a"])({url:"/common/auth/bindThirdPartyUser",data:e,method:"post"})},C=function(e){return Object(n["a"])({url:"/common/auth/ThirdPartyUserCacheIn",data:e,method:"post"})},D=function(e){return Object(n["a"])({url:"https://api.w7.cc/oauth/authorize/try-sync-login",data:e,method:"post"})},k=function(e){return Object(n["a"])({url:"/common/auth/unbind",data:e,method:"post"})},j=function(e){return Object(n["a"])({url:"/admin/chapter/import ",data:e,method:"post"})},M=function(e){return Object(n["a"])({url:"/admin/document/chapterapi/setApiData",data:e,method:"post"})},O=function(e){return Object(n["a"])({url:"/admin/document/new-feedback",data:e,method:"post"})}},"520a":function(e,t,a){"use strict";var n=a("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,c="lastIndex",s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[c]||0!==t[c]}(),l=void 0!==/()??/.exec("")[1],u=s||l;u&&(o=function(e){var t,a,o,u,d=this;return l&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),s&&(t=d[c]),o=i.call(d,e),s&&o&&(d[c]=d.global?o.index+o[0].length:t),l&&o&&o.length>1&&r.call(o[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),e.exports=o},"5dbc":function(e,t,a){var n=a("d3f4"),i=a("8b97").set;e.exports=function(e,t,a){var r,o=t.constructor;return o!==a&&"function"==typeof o&&(r=o.prototype)!==a.prototype&&n(r)&&i&&i(e,r),e}},"5f1b":function(e,t,a){"use strict";var n=a("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var r=a.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},6297:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o}));var n=a("1c1e"),i=function(e){return Object(n["a"])({url:"/admin/document/feedback-list",data:e,method:"post"})},r=function(e){return Object(n["a"])({url:"/admin/document/feedback-detail",data:e,method:"post"})},o=function(e){return Object(n["a"])({url:"/document/feedback/add",data:e,method:"post"})}},"6b54":function(e,t,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),r=a("9e1e"),o="toString",c=/./[o],s=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?s((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)})):c.name!=o&&s((function(){return c.call(this)}))},"79ac":function(e,t,a){"use strict";(function(e){a("28a5"),a("6b54"),a("7f7f");var n=a("4ec3"),i=a("6297");t["a"]={name:"setting",props:["id"],data:function(){return{active:0,details:"",docData:{cover:"",name:"",is_public:"1",login_preview:"2",is_public_Copy:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"change"}]},addManageData:{},role_list:[],showAddManage:!1,shwoEditRole:!1,selectUserId:"",selectUserRole:"",historyList:[],currentPageHistory:1,pageCountHistory:0,feedList:[],feedDetail:{},feedType:"",totalHistory:0,currentPageFeed:1,newFeed:!1,pageCountFeed:0,feedDetailVisible:!1,userOptions:[],loading:!1,deleteDocVisible:!1,formLabelWidth:"120px",deleteDocForm:{name:"",document_id:""}}},watch:{id:function(e,t){this.active=0,this.getdetails()}},created:function(){this.getdetails(),this.getFeedFlag()},mounted:function(){var t=this;e(document).on("click",(function(){t.shwoEditRole=!1}))},methods:{onClickNav:function(e){2==e?this.getHistory():3==e&&this.getFeed(),this.active=e},getdetails:function(){var e=this;this.$post("/admin/document/detail",{document_id:this.id}).then((function(t){e.details=t.data;var a="",n="";1==t.data.is_public?(n=2,a=1):(t.data.is_public,n=t.data.is_public,a=2),e.docData={cover:t.data.cover||"",name:t.data.name,is_public:a,login_preview:n,is_public_Copy:t.data.is_public},e.docData.is_public=e.docData.is_public.toString(),e.docData.login_preview=e.docData.login_preview.toString(),e.role_list=t.data.role_list,e.addManageData.role=t.data.role_list[0].id,e.deleteDocForm.document_id=e.details.id}))},getHistory:function(){var e=this;this.$post("/admin/operate-log/get-by-document ",{document_id:this.id,page:this.currentPageHistory}).then((function(t){e.historyList=t.data.data||[],e.pageCountHistory=t.data.page_count,e.totalHistory=t.data.total,e.$refs.historyTableRef.bodyWrapper.scrollTop=0}))},getFeed:function(){var e=this;Object(i["b"])({document_id:this.id,page:this.currentPageFeed,page_size:this.pageCountFeed}).then((function(t){e.feedList=t.data.data||[],e.pageCountFeed=t.data.pegt_count,e.$refs.feedTableRef.bodyWrapper.scrollTop=0}))},getFeedDetail:function(e){var t=this;Object(i["a"])({feed_id:e.id,document_id:e.document_id}).then((function(e){t.feedDetail=e.data;var a=t.feedDetail.type_name.split(",");t.feedType="";for(var n=0;n<a.length;n++)t.feedType+="".concat(n+1," : ").concat(a[n],"<br/>");t.feedDetailVisible=!0,t.getFeedFlag()}))},getFeedFlag:function(){var e=this;Object(n["i"])({document_id:this.id}).then((function(t){200==t.code&&(e.newFeed=t.data.new_feed)}))},handleAvatarSuccess:function(e){200===e.code?this.docData.cover=e.data.url:this.$message.error(e.message)},beforeAvatarUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传图片只支持jpg、jpeg、png格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),t&&a},saveDoc:function(){var e=this,t=this.docData.cover,a=this.docData.name,n=this.docData.login_preview,i=this.docData.is_public;i=1==i?1:2==n?2:3,this.$refs["docForm"].validate((function(n){n&&e.$post("/admin/document/update",{document_id:e.details.id,cover:t,name:a,is_public:i}).then((function(){e.getdetails(),e.$message({type:"success",message:"保存成功!"})}))}))},delDoc:function(){this.deleteDocVisible=!0},editManage:function(e){this.selectUserId=e.id,this.selectUserRole=e.acl.role,this.shwoEditRole=!0},editRole:function(){var e=this;this.$post("/admin/document/operator",{user_id:this.selectUserId,document_id:this.id,permission:this.selectUserRole}).then((function(){e.getdetails(),e.shwoEditRole=!1}))},removeManage:function(e){var t=this;this.$confirm("确定删除该操作员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$post("/admin/document/operator",{user_id:e,document_id:t.id}).then((function(){t.getdetails(),t.$message("删除成功！")}))}))},openAddManage:function(){this.addManageData={username:"",role:this.role_list[0].id||""},this.showAddManage=!0},addManage:function(){var e=this,t=!0;for(var a in this.details.operator)if(this.details.operator[a].username==this.addManageData.username)return this.$message("用户已存在"),void(t=!1);t&&this.$refs["addManageForm"].validate((function(t){t&&e.$post("/admin/document/operator",{user_name:e.addManageData.username,document_id:e.id,permission:e.addManageData.role}).then((function(){e.getdetails(),e.$message("添加成功！"),e.showAddManage=!1}))}))},uploadCover:function(){this.$refs.upload.uploadFiles()},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,Object(n["l"])({no_self:1,name:e}).then((function(e){t.loading=!1,t.userOptions=e.data})).catch((function(e){t.loading=!1}))):this.userOptions=[]},defineDeleteDoc:function(){var e=this;Object(n["e"])(this.deleteDocForm).then((function(){e.$parent.handleClose(),e.deleteDocVisible=!1,e.deleteDocForm.name="",e.$message({type:"success",message:"删除成功!"}),e.$router.push("/admin/document/")}))}}}}).call(this,a("1157"))},"8b97":function(e,t,a){var n=a("d3f4"),i=a("cb7c"),r=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:r}},9093:function(e,t,a){var n=a("ce10"),i=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},a481:function(e,t,a){"use strict";var n=a("cb7c"),i=a("4bf8"),r=a("9def"),o=a("4588"),c=a("0390"),s=a("5f1b"),l=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,m){return[function(n,i){var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):a.call(String(r),n,i)},function(e,t){var i=m(a,e,this,t);if(i.done)return i.value;var d=n(e),f=String(this),p="function"===typeof t;p||(t=String(t));var v=d.global;if(v){var b=d.unicode;d.lastIndex=0}var _=[];while(1){var y=s(d,f);if(null===y)break;if(_.push(y),!v)break;var x=String(y[0]);""===x&&(d.lastIndex=c(f,r(d.lastIndex),b))}for(var w="",C=0,D=0;D<_.length;D++){y=_[D];for(var k=String(y[0]),j=l(u(o(y.index),f.length),0),M=[],O=1;O<y.length;O++)M.push(g(y[O]));var S=y.groups;if(p){var F=[k].concat(M,j,f);void 0!==S&&F.push(S);var R=String(t.apply(void 0,F))}else R=h(k,f,j,M,S,t);j>=C&&(w+=f.slice(C,j)+R,C=j+k.length)}return w+f.slice(C)}];function h(e,t,n,r,o,c){var s=n+e.length,l=r.length,u=p;return void 0!==o&&(o=i(o),u=f),a.call(c,u,(function(a,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return a;if(u>l){var f=d(u/10);return 0===f?a:f<=l?void 0===r[f-1]?i.charAt(1):r[f-1]+i.charAt(1):a}c=r[u-1]}return void 0===c?"":c}))}}))},aae3:function(e,t,a){var n=a("d3f4"),i=a("2d95"),r=a("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},ac6a:function(e,t,a){for(var n=a("cadf"),i=a("0d58"),r=a("2aba"),o=a("7726"),c=a("32e9"),s=a("84f2"),l=a("2b4c"),u=l("iterator"),d=l("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=i(p),m=0;m<g.length;m++){var h,v=g[m],b=p[v],_=o[v],y=_&&_.prototype;if(y&&(y[u]||c(y,u,f),y[d]||c(y,d,v),s[v]=f,b))for(h in n)y[h]||r(y,h,n[h],!0)}},b0c5:function(e,t,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},fa9a:function(e,t,a){}}]);