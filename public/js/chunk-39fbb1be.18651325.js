(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39fbb1be"],{1921:function(t,e,o){"use strict";o.d(e,"a",(function(){return i})),o.d(e,"i",(function(){return n})),o.d(e,"h",(function(){return r})),o.d(e,"j",(function(){return s})),o.d(e,"b",(function(){return l})),o.d(e,"c",(function(){return c})),o.d(e,"g",(function(){return u})),o.d(e,"d",(function(){return d})),o.d(e,"f",(function(){return m})),o.d(e,"e",(function(){return f}));var a=o("1c1e"),i=function(t){return Object(a["a"])({url:"/admin/home/get-set",params:t,method:"get"})},n=function(t){return Object(a["a"])({url:"/admin/home/set-open",data:t,method:"post"})},r=function(t){return Object(a["a"])({url:"/admin/home/set-banner",data:t,method:"post"})},s=function(t){return Object(a["a"])({url:"/admin/home/set-title",data:t,method:"post"})},l=function(t){return Object(a["a"])({url:"/admin/home/list",params:t,method:"get"})},c=function(t){return Object(a["a"])({url:"/admin/home/get-type",params:t,method:"get"})},u=function(t){return Object(a["a"])({url:"/admin/home/search-doc",data:t,method:"post"})},d=function(t){return Object(a["a"])({url:"/admin/home/add",data:t,method:"post"})},m=function(t){return Object(a["a"])({url:"/admin/home/edit",data:t,method:"post"})},f=function(t){return Object(a["a"])({url:"/admin/home/delete",data:t,method:"post"})}},"2f21":function(t,e,o){"use strict";var a=o("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3947:function(t,e,o){"use strict";o("c0fe")},"55dd":function(t,e,o){"use strict";var a=o("5ca1"),i=o("d8e8"),n=o("4bf8"),r=o("79e5"),s=[].sort,l=[1,2,3];a(a.P+a.F*(r((function(){l.sort(void 0)}))||!r((function(){l.sort(null)}))||!o("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(n(this)):s.call(n(this),i(t))}})},"7f6c":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"setting"},[o("div",{staticClass:"title"},[t._v("首页文档设置")]),o("div",{staticClass:"tab-wrap"},[o("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"全部",name:"0"}}),o("el-tab-pane",{attrs:{label:"公告",name:"1"}}),o("el-tab-pane",{attrs:{label:"首页类型一",name:"2"}}),o("el-tab-pane",{attrs:{label:"首页类型二",name:"3"}})],1),o("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDialogForm(0)}}},[t._v("添加首页文档")])],1),o("div",{staticClass:"reset-element"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.docSettingData}},[o("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"80"}}),o("el-table-column",{attrs:{align:"center",prop:"document_name",label:"首页名称"}}),2==t.activeName||0==t.activeName?o("el-table-column",{attrs:{align:"center",label:"导航图标"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.logo?o("img",{staticClass:"nav-icon",attrs:{src:a.logo}}):o("span",[t._v("--")])]}}],null,!1,537090118)}):t._e(),o("el-table-column",{attrs:{align:"center",label:"文档地址"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.first_chapter_id?o("a",{attrs:{target:"_blank",href:t.origin+"/chapter/"+a.document_id+"?id="+a.first_chapter_id}},[t._v(t._s(t.origin+"/chapter/"+a.document_id+"?id="+a.first_chapter_id))]):o("span",[t._v("--")])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"type_name",label:"首页显示类型"}}),o("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("span",{staticClass:"edit",on:{click:function(e){return t.showDialogForm(1,a)}}},[t._v("编辑")]),o("span",{staticClass:"remove",on:{click:function(e){return t.remove(a)}}},[t._v("删除")])]}}])})],1),t.total>10?o("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.total}}):t._e()],1),o("el-dialog",{attrs:{title:"首页设置",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"首页类型","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择类型",disabled:t.isEdit},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.hometypes,(function(t){return o("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})})),1)],1),1!==t.form.type?o("el-form-item",{attrs:{label:"文档排序","label-width":t.formLabelWidth}},[o("el-input-number",{attrs:{controls:!1,min:0,max:100,precision:0,placeholder:"输入整数，数值越小排名越靠前"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1):t._e(),2===t.form.type?o("el-form-item",{attrs:{label:"文档图标","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/common/upload/image",accept:"image/*","show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?o("img",{staticClass:"avatar",attrs:{src:t.form.logo,alt:""}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):t._e(),o("el-form-item",{attrs:{label:"添加文档","label-width":t.formLabelWidth}},[o("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入文档名称","trigger-on-focus":!1,clearable:""},on:{select:t.handleSelect},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),2===t.form.type?o("el-form-item",{attrs:{label:"文档简介","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"不超过25个字"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1):t._e()],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},i=[],n=(o("ac6a"),o("55dd"),o("7f7f"),o("1921")),r={name:"indexDocSetting",data:function(){return{origin:"",activeName:localStorage.homeDocSetActiveHome||0,docSettingData:[],queryList:{type:localStorage.homeDocSetActiveHome||0},total:0,dialogFormVisible:!1,formLabelWidth:"120px",hometypes:[],form:{type:1,document_id:void 0,logo:void 0,desc:void 0,sort:void 0,id:void 0},form2:{type:1,document_id:"",logo:"",desc:"",sort:"",id:""},imageUrl:"",searchForm:{keyword:void 0},restaurants:[],isEdit:!1}},created:function(){this.init()},methods:{init:function(){this.origin=location.origin,this.getHomeType(),this.getHomeList()},getHomeType:function(){var t=this;Object(n["c"])().then((function(e){200===e.code&&(t.hometypes=e.data)})).catch((function(t){}))},getHomeList:function(){var t=this;Object(n["b"])(this.queryList).then((function(e){200===e.code&&(t.docSettingData=e.data.data,t.total=e.data.total)})).catch((function(t){}))},handleClick:function(t){this.queryList.type=t.name,localStorage.homeDocSetActiveHome=t.name,this.getHomeList()},showDialogForm:function(t,e){if(this.dialogFormVisible=!0,this.form=JSON.parse(JSON.stringify(this.form2)),this.isEdit=t>0,this.searchForm.keyword="",this.isEdit)this.form.id=e.id,this.form.type=e.type,this.form.sort=e.sort,this.form.logo=e.logo,this.form.desc=e.description;else{var o=+this.activeName;this.form.type=o||1}},remove:function(t){var e=this;this.$confirm("此操作将删除该设置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["e"])({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功!"),e.getHomeList())})).catch((function(t){}))})).catch((function(){e.$message.info("已取消删除")}))},handleUploadSuccess:function(t){200===t.code&&(this.form.logo=t.data.url)},beforeAvatarUpload:function(t){var e=5,o=t.size/1024/1024<=e;return o||this.$message.error("上传图片大小不能超过".concat(e,"MB!")),o},querySearch:function(t,e){var o=this;Object(n["g"])(this.searchForm).then((function(t){o.restaurants=t.data,o.restaurants.forEach((function(t){t["value"]=t.name})),e(o.restaurants)})).finally((function(){o.listLoading=!1}))},handleSelect:function(t){this.form.document_id=t.document_id},submitForm:function(){this.isEdit?this.homeEdit():this.homeAdd()},homeEdit:function(){var t=this;Object(n["f"])(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("更新成功"),t.getHomeList())}))},homeAdd:function(){var t=this;Object(n["d"])(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("保存成功"),t.getHomeList())}))}}},s=r,l=(o("3947"),o("2877")),c=Object(l["a"])(s,a,i,!1,null,"6371d873",null);e["default"]=c.exports},ac6a:function(t,e,o){for(var a=o("cadf"),i=o("0d58"),n=o("2aba"),r=o("7726"),s=o("32e9"),l=o("84f2"),c=o("2b4c"),u=c("iterator"),d=c("toStringTag"),m=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),p=0;p<h.length;p++){var b,g=h[p],v=f[g],y=r[g],L=y&&y.prototype;if(L&&(L[u]||s(L,u,m),L[d]||s(L,d,g),l[g]=m,v))for(b in a)L[b]||n(L,b,a[b],!0)}},c0fe:function(t,e,o){}}]);