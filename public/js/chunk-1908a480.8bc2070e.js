(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1908a480"],{1921:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"i",(function(){return i})),a.d(e,"h",(function(){return r})),a.d(e,"j",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"d",(function(){return m})),a.d(e,"f",(function(){return d})),a.d(e,"e",(function(){return h}));var o=a("1c1e"),n=function(t){return Object(o["a"])({url:"/admin/home/get-set",params:t,method:"get"})},i=function(t){return Object(o["a"])({url:"/admin/home/set-open",data:t,method:"post"})},r=function(t){return Object(o["a"])({url:"/admin/home/set-banner",data:t,method:"post"})},l=function(t){return Object(o["a"])({url:"/admin/home/set-title",data:t,method:"post"})},s=function(t){return Object(o["a"])({url:"/admin/home/list",params:t,method:"get"})},c=function(t){return Object(o["a"])({url:"/admin/home/get-type",params:t,method:"get"})},u=function(t){return Object(o["a"])({url:"/admin/home/search-doc",data:t,method:"post"})},m=function(t){return Object(o["a"])({url:"/admin/home/add",data:t,method:"post"})},d=function(t){return Object(o["a"])({url:"/admin/home/edit",data:t,method:"post"})},h=function(t){return Object(o["a"])({url:"/admin/home/delete",data:t,method:"post"})}},"732d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("div",{staticClass:"title"},[t._v("首页设置")]),a("table",[t._m(0),a("tr",[a("td",[t._v("开启首页")]),a("td",[t.homeData&&t.homeData.open_home?[t._v(t._s(t.homeData.open_home.url))]:t._e()],2),a("td",[t.homeData&&t.homeData.open_home?a("el-switch",{attrs:{"active-color":"#4096f9","inactive-color":"#999","active-value":1,"inactive-value":0},on:{change:t.openHomeChange},model:{value:t.homeData.open_home.is_open,callback:function(e){t.$set(t.homeData.open_home,"is_open",e)},expression:"homeData.open_home.is_open"}}):t._e()],1)]),a("tr",[a("td",[t._v("首页banner图")]),a("td"),a("td",[a("span",{on:{click:t.showUploadBannerDialog}},[t._v("设置")])])]),a("tr",[a("td",[t._v("文档首页名称")]),a("td"),a("td",[a("span",{on:{click:t.showTitleDialog}},[t._v("设置")])])])]),a("el-dialog",{attrs:{title:"banner上传",visible:t.uploadBannerDialogVisible,center:"",width:"500px"},on:{"update:visible":function(e){t.uploadBannerDialogVisible=e}}},[a("el-form",{ref:"uploadBannerForm",attrs:{model:t.uploadBannerForm,"label-width":"150px"}},[a("el-form-item",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/common/upload/image",accept:"image/*","show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.uploadBannerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBannerForm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"文档首页名称修改",visible:t.titleDialogVisible,center:"",width:"500px"},on:{"update:visible":function(e){t.titleDialogVisible=e}}},[a("el-form",{ref:"uploadBannerForm",attrs:{model:t.titleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文档首页名称"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:t.titleForm.title,callback:function(e){t.$set(t.titleForm,"title",e)},expression:"titleForm.title"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.titleDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitTitleForm}},[t._v("确 定")])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{width:"200"}},[t._v("基本设置")]),a("th"),a("th",{attrs:{width:"200"}},[t._v("操作")])])}],i=a("1921"),r={name:"indexSetting",data:function(){return{homeData:[],uploadBannerDialogVisible:!1,titleDialogVisible:!1,uploadBannerForm:{images:[]},imageUrl:"",titleForm:{title:""}}},created:function(){this.init()},methods:{init:function(){this.getHomeData()},getHomeData:function(){var t=this;Object(i["a"])().then((function(e){200===e.code&&(t.homeData=e.data)})).catch((function(t){}))},openHomeChange:function(t){var e=this;Object(i["i"])({is_open:t}).then((function(t){200===t.code&&e.getHomeData()})).catch((function(t){}))},showUploadBannerDialog:function(){this.uploadBannerDialogVisible=!0,this.uploadBannerForm.images=this.homeData.banner,this.imageUrl=this.homeData.banner[0]},showTitleDialog:function(){this.titleDialogVisible=!0,this.titleForm.title=this.homeData.title},handleUploadSuccess:function(t){200===t.code&&(this.imageUrl=t.data.url,this.uploadBannerForm.images=[],this.uploadBannerForm.images.push(t.data.url))},beforeAvatarUpload:function(t){var e=5,a=t.size/1024/1024<=e;return a||this.$message.error("上传图片大小不能超过".concat(e,"MB!")),a},submitBannerForm:function(){var t=this;if(!this.uploadBannerForm.images.length)return this.$message.closeAll(),this.$message.error("请上传图片"),!1;Object(i["h"])(this.uploadBannerForm).then((function(e){200===e.code&&(t.uploadBannerDialogVisible=!1,t.$message.success("图片保存成功"),t.getHomeData())})).catch((function(t){}))},submitTitleForm:function(){var t=this;if(!this.titleForm.title.length)return this.$message.closeAll(),this.$message.error("文档首页名称不能为空"),!1;Object(i["j"])(this.titleForm).then((function(e){200===e.code&&(t.titleDialogVisible=!1,t.$message.success("保存成功"),t.getHomeData())})).catch((function(t){}))}}},l=r,s=(a("da63"),a("2877")),c=Object(s["a"])(l,o,n,!1,null,"31f04de5",null);e["default"]=c.exports},da63:function(t,e,a){"use strict";a("dd41")},dd41:function(t,e,a){}}]);