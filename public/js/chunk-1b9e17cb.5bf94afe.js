(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b9e17cb"],{"11e9":function(t,e,a){var o=a("52a7"),i=a("4630"),n=a("6821"),r=a("6a99"),l=a("69a8"),s=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=n(t),e=r(e,!0),s)try{return c(t,e)}catch(a){}if(l(t,e))return i(!o.f.call(t,e),t[e])}},"1cb1":function(t,e,a){},"2f21":function(t,e,a){"use strict";var o=a("79e5");t.exports=function(t,e){return!!t&&o((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"40a8":function(t,e,a){},"456d":function(t,e,a){var o=a("4bf8"),i=a("0d58");a("5eda")("keys",(function(){return function(t){return i(o(t))}}))},"55dd":function(t,e,a){"use strict";var o=a("5ca1"),i=a("d8e8"),n=a("4bf8"),r=a("79e5"),l=[].sort,s=[1,2,3];o(o.P+o.F*(r((function(){s.sort(void 0)}))||!r((function(){s.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),i(t))}})},"5eda":function(t,e,a){var o=a("5ca1"),i=a("8378"),n=a("79e5");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],r={};r[t]=e(a),o(o.S+o.F*n((function(){a(1)})),"Object",r)}},"732d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"首页设置",name:"index"}},[a("table",[a("tr",[a("th",{attrs:{width:"200"}},[t._v("基本设置")]),a("th"),a("th",{attrs:{width:"200"}},[t._v("操作")])]),a("tr",[a("td",[t._v("开启首页")]),a("td",[t.homeData&&t.homeData.open_home?[t._v(t._s(t.homeData.open_home.url))]:t._e()],2),a("td",[t.homeData&&t.homeData.open_home?a("el-switch",{attrs:{"active-color":"#4096f9","inactive-color":"#999","active-value":1,"inactive-value":0},on:{change:t.openHomeChange},model:{value:t.homeData.open_home.is_open,callback:function(e){t.$set(t.homeData.open_home,"is_open",e)},expression:"homeData.open_home.is_open"}}):t._e()],1)]),a("tr",[a("td",[t._v("首页banner图")]),a("td"),a("td",[a("span",{on:{click:t.showUploadBannerDialog}},[t._v("设置")])])]),a("tr",[a("td",[t._v("文档首页名称")]),a("td"),a("td",[a("span",{on:{click:t.showTitleDialog}},[t._v("设置")])])])]),a("el-dialog",{attrs:{title:"banner上传",visible:t.uploadBannerDialogVisible,center:"",width:"500px"},on:{"update:visible":function(e){t.uploadBannerDialogVisible=e}}},[a("el-form",{ref:"uploadBannerForm",attrs:{model:t.uploadBannerForm,"label-width":"150px"}},[a("el-form-item",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/common/upload/image",accept:"image/*","show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.uploadBannerDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBannerForm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"文档首页名称修改",visible:t.titleDialogVisible,center:"",width:"500px"},on:{"update:visible":function(e){t.titleDialogVisible=e}}},[a("el-form",{ref:"uploadBannerForm",attrs:{model:t.titleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文档首页名称"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:t.titleForm.title,callback:function(e){t.$set(t.titleForm,"title",e)},expression:"titleForm.title"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.titleDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitTitleForm}},[t._v("确 定")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"文档设置",name:"document"}},[a("index-doc-setting")],1)],1)],1)},i=[],n=a("1c1e"),r=function(t){return Object(n["a"])({url:"/admin/home/get-set",params:t,method:"get"})},l=function(t){return Object(n["a"])({url:"/admin/home/set-open",data:t,method:"post"})},s=function(t){return Object(n["a"])({url:"/admin/home/set-banner",data:t,method:"post"})},c=function(t){return Object(n["a"])({url:"/admin/home/set-title",data:t,method:"post"})},u=function(t){return Object(n["a"])({url:"/admin/home/list",params:t,method:"get"})},m=function(t){return Object(n["a"])({url:"/admin/home/get-type",params:t,method:"get"})},d=function(t){return Object(n["a"])({url:"/admin/home/search-doc",data:t,method:"post"})},f=function(t){return Object(n["a"])({url:"/admin/home/add",data:t,method:"post"})},h=function(t){return Object(n["a"])({url:"/admin/home/edit",data:t,method:"post"})},p=function(t){return Object(n["a"])({url:"/admin/home/delete",data:t,method:"post"})},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("div",{staticClass:"tab-wrap"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),a("el-tab-pane",{attrs:{label:"公告",name:"1"}}),a("el-tab-pane",{attrs:{label:"首页类型一",name:"2"}}),a("el-tab-pane",{attrs:{label:"首页类型二",name:"3"}})],1),a("el-button",{staticClass:"add",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDialogForm(0)}}},[t._v("添加首页文档")])],1),a("div",{staticClass:"reset-element"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.docSettingData}},[a("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"80"}}),a("el-table-column",{attrs:{align:"center",prop:"document_name",label:"首页名称"}}),2==t.activeName||0==t.activeName?a("el-table-column",{attrs:{align:"center",label:"导航图标"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.logo?a("img",{staticClass:"nav-icon",attrs:{src:o.logo}}):a("span",[t._v("--")])]}}],null,!1,537090118)}):t._e(),a("el-table-column",{attrs:{align:"center",label:"文档地址"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.first_chapter_id?a("a",{attrs:{target:"_blank",href:t.origin+"/chapter/"+o.document_id+"?id="+o.first_chapter_id}},[t._v(t._s(t.origin+"/chapter/"+o.document_id+"?id="+o.first_chapter_id))]):a("span",[t._v("--")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"type_name",label:"首页显示类型"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",{staticClass:"edit",on:{click:function(e){return t.showDialogForm(1,o)}}},[t._v("编辑")]),a("span",{staticClass:"remove",on:{click:function(e){return t.remove(o)}}},[t._v("删除")])]}}])})],1),t.total>10?a("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e()],1),a("el-dialog",{attrs:{title:"首页设置",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"首页类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择类型",disabled:t.isEdit},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.hometypes,(function(t){return a("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})})),1)],1),1!==t.form.type?a("el-form-item",{attrs:{label:"文档排序","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{controls:!1,min:0,max:100,precision:0,placeholder:"输入整数，数值越小排名越靠前"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1):t._e(),2===t.form.type?a("el-form-item",{attrs:{label:"文档图标","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/common/upload/image",accept:"image/*","show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo,alt:""}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):t._e(),a("el-form-item",{attrs:{label:"添加文档","label-width":t.formLabelWidth}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入文档名称","trigger-on-focus":!1,clearable:""},on:{select:t.handleSelect},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),2===t.form.type?a("el-form-item",{attrs:{label:"文档简介","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"不超过25个字"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},b=[],v=(a("8e6e"),a("456d"),a("ac6a"),a("55dd"),a("7f7f"),a("ade3"));function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D={name:"indexDocSetting",data:function(){return{origin:"",activeName:localStorage.homeDocSetActiveHome||0,docSettingData:[],queryList:{type:localStorage.homeDocSetActiveHome||0},total:0,page:1,pageSize:10,dialogFormVisible:!1,formLabelWidth:"120px",hometypes:[],form:{type:1,document_id:void 0,logo:void 0,desc:void 0,sort:void 0,id:void 0},form2:{type:1,document_id:"",logo:"",desc:"",sort:"",id:""},imageUrl:"",searchForm:{keyword:void 0},restaurants:[],isEdit:!1}},created:function(){this.init()},methods:{init:function(){this.origin=location.origin,this.getHomeType(),this.getHomeList()},getHomeType:function(){var t=this;m().then((function(e){200===e.code&&(t.hometypes=e.data)})).catch((function(t){}))},getHomeList:function(){var t=this;u(_(_({},this.queryList),{},{page:this.page,page_size:this.pageSize})).then((function(e){200===e.code&&(t.docSettingData=e.data.data,t.total=e.data.total,t.page=e.data.page_current)})).catch((function(t){}))},handleClick:function(t){this.queryList.type=t.name,this.page=1,localStorage.homeDocSetActiveHome=t.name,this.getHomeList()},showDialogForm:function(t,e){if(this.dialogFormVisible=!0,this.form=JSON.parse(JSON.stringify(this.form2)),this.isEdit=t>0,this.searchForm.keyword="",this.isEdit)this.form.id=e.id,this.form.type=e.type,this.form.sort=e.sort,this.form.logo=e.logo,this.form.desc=e.description;else{var a=+this.activeName;this.form.type=a||1}},remove:function(t){var e=this;this.$confirm("此操作将删除该设置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p({id:t.id}).then((function(t){200===t.code&&(e.$message.success("删除成功!"),e.getHomeList())})).catch((function(t){}))})).catch((function(){e.$message.info("已取消删除")}))},handleUploadSuccess:function(t){200===t.code&&(this.form.logo=t.data.url)},beforeAvatarUpload:function(t){var e=5,a=t.size/1024/1024<=e;return a||this.$message.error("上传图片大小不能超过".concat(e,"MB!")),a},querySearch:function(t,e){var a=this;d(this.searchForm).then((function(t){a.restaurants=t.data,a.restaurants.forEach((function(t){t["value"]=t.name})),e(a.restaurants)})).finally((function(){a.listLoading=!1}))},handleSelect:function(t){this.form.document_id=t.document_id},submitForm:function(){this.isEdit?this.homeEdit():this.homeAdd()},homeEdit:function(){var t=this;h(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("更新成功"),t.getHomeList())}))},homeAdd:function(){var t=this;f(this.form).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.$message.success("保存成功"),t.getHomeList())}))},handleCurrentChange:function(t){this.page=t,this.getHomeList()}}},S=D,w=(a("e1ff"),a("2877")),O=Object(w["a"])(S,g,b,!1,null,"4599d29e",null),L=O.exports,F={name:"indexSetting",components:{indexDocSetting:L},data:function(){return{homeData:[],uploadBannerDialogVisible:!1,titleDialogVisible:!1,uploadBannerForm:{images:[]},imageUrl:"",titleForm:{title:""},activeName:"index"}},created:function(){this.init()},methods:{init:function(){this.getHomeData()},getHomeData:function(){var t=this;r().then((function(e){200===e.code&&(t.homeData=e.data)})).catch((function(t){}))},openHomeChange:function(t){var e=this;l({is_open:t}).then((function(t){200===t.code&&e.getHomeData()})).catch((function(t){}))},showUploadBannerDialog:function(){this.uploadBannerDialogVisible=!0,this.uploadBannerForm.images=this.homeData.banner,this.imageUrl=this.homeData.banner[0]},showTitleDialog:function(){this.titleDialogVisible=!0,this.titleForm.title=this.homeData.title},handleUploadSuccess:function(t){200===t.code&&(this.imageUrl=t.data.url,this.uploadBannerForm.images=[],this.uploadBannerForm.images.push(t.data.url))},beforeAvatarUpload:function(t){var e=5,a=t.size/1024/1024<=e;return a||this.$message.error("上传图片大小不能超过".concat(e,"MB!")),a},submitBannerForm:function(){var t=this;if(!this.uploadBannerForm.images.length)return this.$message.closeAll(),this.$message.error("请上传图片"),!1;s(this.uploadBannerForm).then((function(e){200===e.code&&(t.uploadBannerDialogVisible=!1,t.$message.success("图片保存成功"),t.getHomeData())})).catch((function(t){}))},submitTitleForm:function(){var t=this;if(!this.titleForm.title.length)return this.$message.closeAll(),this.$message.error("文档首页名称不能为空"),!1;c(this.titleForm).then((function(e){200===e.code&&(t.titleDialogVisible=!1,t.$message.success("保存成功"),t.getHomeData())})).catch((function(t){}))}}},k=F,x=(a("d23f"),Object(w["a"])(k,o,i,!1,null,"091246e5",null));e["default"]=x.exports},"8e6e":function(t,e,a){var o=a("5ca1"),i=a("990b"),n=a("6821"),r=a("11e9"),l=a("f1ae");o(o.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,o=n(t),s=r.f,c=i(o),u={},m=0;while(c.length>m)a=s(o,e=c[m++]),void 0!==a&&l(u,e,a);return u}})},9093:function(t,e,a){var o=a("ce10"),i=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,i)}},"990b":function(t,e,a){var o=a("9093"),i=a("2621"),n=a("cb7c"),r=a("7726").Reflect;t.exports=r&&r.ownKeys||function(t){var e=o.f(n(t)),a=i.f;return a?e.concat(a(t)):e}},ac6a:function(t,e,a){for(var o=a("cadf"),i=a("0d58"),n=a("2aba"),r=a("7726"),l=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),m=c("toStringTag"),d=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),p=0;p<h.length;p++){var g,b=h[p],v=f[b],y=r[b],_=y&&y.prototype;if(_&&(_[u]||l(_,u,d),_[m]||l(_,m,b),s[b]=d,v))for(g in o)_[g]||n(_,g,o[g],!0)}},ade3:function(t,e,a){"use strict";function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return o}))},d23f:function(t,e,a){"use strict";a("1cb1")},e1ff:function(t,e,a){"use strict";a("40a8")},f1ae:function(t,e,a){"use strict";var o=a("86cc"),i=a("4630");t.exports=function(t,e,a){e in t?o.f(t,e,i(0,a)):t[e]=a}}}]);